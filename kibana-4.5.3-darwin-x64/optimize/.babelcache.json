{
  "{\"filename\":\"/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./server/proxy_config_collection",
            "imported": [
              "ProxyConfigCollection"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProxyConfigCollection",
                "local": "ProxyConfigCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "extends"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _serverProxy_config_collection = require('./server/proxy_config_collection');\n\nmodule.exports = function (kibana) {\n  var _require = require('path');\n\n  var resolve = _require.resolve;\n  var join = _require.join;\n  var sep = _require.sep;\n\n  var Joi = require('joi');\n  var Boom = require('boom');\n  var modules = resolve(__dirname, 'public/webpackShims/');\n  var src = resolve(__dirname, 'public/src/');\n\n  var _require2 = require('fs');\n\n  var existsSync = _require2.existsSync;\n\n  var _require3 = require('lodash');\n\n  var startsWith = _require3.startsWith;\n  var endsWith = _require3.endsWith;\n\n  var apps = [{\n    title: 'Sense',\n    description: 'JSON aware developer\\'s interface to ElasticSearch',\n    icon: 'plugins/sense/bonsai.png',\n    main: 'plugins/sense/sense',\n    autoload: kibana.autoload.styles,\n    injectVars: function injectVars(server, options) {\n      return options;\n    }\n  }];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Sense Tests',\n      id: 'sense-tests',\n      main: 'plugins/sense/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'sense',\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        defaultServerUrl: Joi.string()['default']('http://localhost:9200'),\n        proxyFilter: Joi.array().items(Joi.string()).single()['default'](['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean()\n        })['default'](),\n        proxyConfig: Joi.array().items(Joi.object().keys({\n          match: Joi.object().keys({\n            protocol: Joi.string()['default']('*'),\n            host: Joi.string()['default']('*'),\n            port: Joi.string()['default']('*'),\n            path: Joi.string()['default']('*')\n          }),\n\n          timeout: Joi.number(),\n          ssl: Joi.object().keys({\n            verify: Joi.boolean(),\n            ca: Joi.array().single().items(Joi.string()),\n            cert: Joi.string(),\n            key: Joi.string()\n          })['default']()\n        }))['default']([{\n          match: {\n            protocol: '*',\n            host: '*',\n            port: '*',\n            path: '*'\n          },\n\n          timeout: 180000,\n          ssl: {\n            verify: true\n          }\n        }])\n      })['default']();\n    },\n\n    init: function init(server, options) {\n      var filters = options.proxyFilter.map(function (str) {\n        return new RegExp(str);\n      });\n\n      if (options.ssl && options.ssl.verify) {\n        throw new Error('sense.ssl.version is no longer supported.');\n      }\n\n      var proxyConfigCollection = new _serverProxy_config_collection.ProxyConfigCollection(options.proxyConfig);\n      var proxyRouteConfig = {\n        validate: {\n          query: Joi.object().keys({\n            uri: Joi.string().uri({\n              allowRelative: false,\n              shema: ['http:', 'https:']\n            })\n          }).unknown(true)\n        },\n\n        pre: [function filterUri(req, reply) {\n          var uri = req.query.uri;\n\n          if (!filters.some(function (re) {\n            return re.test(uri);\n          })) {\n            var err = Boom.forbidden();\n            err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n            err.output.headers['content-type'] = 'text/plain';\n            reply(err);\n          } else {\n            reply();\n          }\n        }],\n\n        handler: function handler(req, reply) {\n          var uri = req.query.uri;\n\n          reply.proxy(_extends({\n            uri: uri,\n            xforward: true,\n            passThrough: true,\n            onResponse: function onResponse(err, res, request, reply, settings, ttl) {\n              if (err != null) {\n                reply(\"Error connecting to '\" + request.query.uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n              } else {\n                reply(null, res);\n              }\n            }\n\n          }, proxyConfigCollection.configForUri(uri)));\n        }\n      };\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: '*',\n        config: _extends({}, proxyRouteConfig, {\n\n          payload: {\n            output: 'stream',\n            parse: false\n          }\n        })\n      });\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: 'GET',\n        config: _extends({}, proxyRouteConfig)\n      });\n\n      server.route({\n        path: '/api/sense/api_server',\n        method: ['GET', 'POST'],\n        handler: function handler(req, reply) {\n          var server = require('./api_server/server');\n          var _req$query = req.query;\n          var sense_version = _req$query.sense_version;\n          var apis = _req$query.apis;\n\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      var testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function handler(req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [join(modules, 'ace' + sep), join(modules, 'moment_src/moment' + sep), join(src, 'sense_editor/mode/worker.js')]\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kbWl0cml5LnR1cm92dHNvdi9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtZGFyd2luLXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7NkNBQXNDLGtDQUFrQzs7QUFFeEUsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtpQkFDSixPQUFPLENBQUMsTUFBTSxDQUFDOztNQUF0QyxPQUFPLFlBQVAsT0FBTztNQUFFLElBQUksWUFBSixJQUFJO01BQUUsR0FBRyxZQUFILEdBQUc7O0FBQ3hCLE1BQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QixNQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsTUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3pELE1BQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7O2tCQUN2QixPQUFPLENBQUMsSUFBSSxDQUFDOztNQUE1QixVQUFVLGFBQVYsVUFBVTs7a0JBQ2lCLE9BQU8sQ0FBQyxRQUFRLENBQUM7O01BQTFDLFVBQVUsYUFBVixVQUFVO01BQUUsUUFBUSxhQUFSLFFBQVE7O0FBRTVCLE1BQU0sSUFBSSxHQUFHLENBQ1g7QUFDRSxTQUFLLEVBQUUsT0FBTztBQUNkLGVBQVcsRUFBRSxvREFBb0Q7QUFDakUsUUFBSSxFQUFFLDBCQUEwQjtBQUNoQyxRQUFJLEVBQUUscUJBQXFCO0FBQzNCLFlBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU07QUFDaEMsY0FBVSxFQUFFLG9CQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDckMsYUFBTyxPQUFPLENBQUM7S0FDaEI7R0FDRixDQUNGLENBQUM7O0FBRUYsTUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQyxFQUFFO0FBQ2xELFFBQUksQ0FBQyxJQUFJLENBQUM7QUFDUixXQUFLLEVBQUUsYUFBYTtBQUNwQixRQUFFLEVBQUUsYUFBYTtBQUNqQixVQUFJLEVBQUUscUJBQXFCO0FBQzNCLFlBQU0sRUFBRSxJQUFJOztLQUViLENBQUMsQ0FBQztHQUNKOztBQUVELFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLE1BQUUsRUFBRSxPQUFPOztBQUVYLFVBQU0sRUFBRSxnQkFBVSxHQUFHLEVBQUU7QUFDckIsYUFBTyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ2hCLGVBQU8sRUFBRSxHQUFHLENBQUMsT0FBTyxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7QUFDcEMsd0JBQWdCLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxXQUFRLENBQUMsdUJBQXVCLENBQUM7QUFDL0QsbUJBQVcsRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxXQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyRSxXQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNkLGdCQUFNLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBRTtTQUN0QixDQUFDLFdBQVEsRUFBRTtBQUNaLG1CQUFXLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FDNUIsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUNoQixlQUFLLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUN2QixvQkFBUSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQztBQUNuQyxnQkFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQztBQUMvQixnQkFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQztBQUMvQixnQkFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQztXQUNoQyxDQUFDOztBQUVGLGlCQUFPLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtBQUNyQixhQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUNyQixrQkFBTSxFQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUU7QUFDckIsY0FBRSxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzVDLGdCQUFJLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtBQUNsQixlQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRTtXQUNsQixDQUFDLFdBQVEsRUFBRTtTQUNiLENBQUMsQ0FDSCxXQUFRLENBQUMsQ0FDUjtBQUNFLGVBQUssRUFBRTtBQUNMLG9CQUFRLEVBQUUsR0FBRztBQUNiLGdCQUFJLEVBQUUsR0FBRztBQUNULGdCQUFJLEVBQUUsR0FBRztBQUNULGdCQUFJLEVBQUUsR0FBRztXQUNWOztBQUVELGlCQUFPLEVBQUUsTUFBTTtBQUNmLGFBQUcsRUFBRTtBQUNILGtCQUFNLEVBQUUsSUFBSTtXQUNiO1NBQ0YsQ0FDRixDQUFDO09BQ0gsQ0FBQyxXQUFRLEVBQUUsQ0FBQztLQUNkOztBQUVELFFBQUksRUFBRSxjQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDL0IsVUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsVUFBQSxHQUFHO2VBQUksSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDO09BQUEsQ0FBQyxDQUFDOztBQUVoRSxVQUFJLE9BQU8sQ0FBQyxHQUFHLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUU7QUFDckMsY0FBTSxJQUFJLEtBQUssQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO09BQzlEOztBQUVELFVBQU0scUJBQXFCLEdBQUcseURBQTBCLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUM3RSxVQUFNLGdCQUFnQixHQUFHO0FBQ3ZCLGdCQUFRLEVBQUU7QUFDUixlQUFLLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUN2QixlQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQztBQUNwQiwyQkFBYSxFQUFFLEtBQUs7QUFDcEIsbUJBQUssRUFBRSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUM7YUFDM0IsQ0FBQztXQUNILENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1NBQ2pCOztBQUVELFdBQUcsRUFBRSxDQUNILFNBQVMsU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUU7Y0FDckIsR0FBRyxHQUFLLEdBQUcsQ0FBQyxLQUFLLENBQWpCLEdBQUc7O0FBRVgsY0FBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBQSxFQUFFO21CQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1dBQUEsQ0FBQyxFQUFFO0FBQ3JDLGdCQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDN0IsZUFBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsdUJBQXVCLEdBQUcsR0FBRyxHQUFHLDRDQUE0QyxDQUFDO0FBQ2xHLGVBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxHQUFHLFlBQVksQ0FBQztBQUNsRCxpQkFBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1dBQ1osTUFBTTtBQUNMLGlCQUFLLEVBQUUsQ0FBQztXQUNUO1NBQ0YsQ0FDRjs7QUFFRCxlQUFPLEVBQUEsaUJBQUMsR0FBRyxFQUFFLEtBQUssRUFBRTtjQUNWLEdBQUcsR0FBSyxHQUFHLENBQUMsS0FBSyxDQUFqQixHQUFHOztBQUVYLGVBQUssQ0FBQyxLQUFLO0FBQ1QsZUFBRyxFQUFILEdBQUc7QUFDSCxvQkFBUSxFQUFFLElBQUk7QUFDZCx1QkFBVyxFQUFFLElBQUk7QUFDakIsc0JBQVUsRUFBQSxvQkFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRTtBQUNsRCxrQkFBSSxHQUFHLElBQUksSUFBSSxFQUFFO0FBQ2YscUJBQUssQ0FBQyx1QkFBdUIsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxRQUFRLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO2VBQ2pILE1BQU07QUFDTCxxQkFBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztlQUNsQjthQUNGOzthQUVFLHFCQUFxQixDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFDMUMsQ0FBQTtTQUNIO09BQ0YsQ0FBQzs7QUFFRixZQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsWUFBSSxFQUFFLGtCQUFrQjtBQUN4QixjQUFNLEVBQUUsR0FBRztBQUNYLGNBQU0sZUFDRCxnQkFBZ0I7O0FBRW5CLGlCQUFPLEVBQUU7QUFDUCxrQkFBTSxFQUFFLFFBQVE7QUFDaEIsaUJBQUssRUFBRSxLQUFLO1dBQ2I7VUFDRjtPQUNGLENBQUMsQ0FBQzs7QUFFSCxZQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsWUFBSSxFQUFFLGtCQUFrQjtBQUN4QixjQUFNLEVBQUUsS0FBSztBQUNiLGNBQU0sZUFDRCxnQkFBZ0IsQ0FDcEI7T0FDRixDQUFDLENBQUE7O0FBRUYsWUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFlBQUksRUFBRSx1QkFBdUI7QUFDN0IsY0FBTSxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQztBQUN2QixlQUFPLEVBQUUsaUJBQVUsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM3QixjQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzsyQkFDaEIsR0FBRyxDQUFDLEtBQUs7Y0FBaEMsYUFBYSxjQUFiLGFBQWE7Y0FBRSxJQUFJLGNBQUosSUFBSTs7QUFDeEIsY0FBSSxDQUFDLElBQUksRUFBRTtBQUNULGlCQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDLENBQUM7QUFDdEQsbUJBQU87V0FDUjs7QUFFRCxpQkFBTyxNQUFNLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ2pFO09BQ0YsQ0FBQyxDQUFDOztBQUVILFVBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDakUsVUFBSSxPQUFPLEVBQUU7QUFDWCxjQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsY0FBSSxFQUFFLGtCQUFrQjtBQUN4QixnQkFBTSxFQUFFLEtBQUs7QUFDYixpQkFBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0IsbUJBQU8sS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztXQUNqQztTQUNGLENBQUMsQ0FBQztPQUNKO0tBQ0Y7O0FBRUQsYUFBUyxFQUFFO0FBQ1QsVUFBSSxFQUFFLElBQUk7O0FBRVYsYUFBTyxFQUFFLENBQ1AsSUFBSSxDQUFDLE9BQU8sRUFBRSxLQUFLLEdBQUcsR0FBRyxDQUFDLEVBQzFCLElBQUksQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLEdBQUcsR0FBRyxDQUFDLEVBQ3hDLElBQUksQ0FBQyxHQUFHLEVBQUUsNkJBQTZCLENBQUMsQ0FDekM7S0FDRjtHQUNGLENBQUMsQ0FBQTtDQUNILENBQUMiLCJmaWxlIjoiL1VzZXJzL2RtaXRyaXkudHVyb3Z0c292L21hc3Rlci1naXQvZXMtYm9vay1leGFtcGxlL2tpYmFuYS00LjUuMy1kYXJ3aW4teDY0L2luc3RhbGxlZFBsdWdpbnMvc2Vuc2UvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm94eUNvbmZpZ0NvbGxlY3Rpb24gfSBmcm9tICcuL3NlcnZlci9wcm94eV9jb25maWdfY29sbGVjdGlvbic7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtpYmFuYSkge1xuICBsZXQgeyByZXNvbHZlLCBqb2luLCBzZXAgfSA9IHJlcXVpcmUoJ3BhdGgnKTtcbiAgbGV0IEpvaSA9IHJlcXVpcmUoJ2pvaScpO1xuICBsZXQgQm9vbSA9IHJlcXVpcmUoJ2Jvb20nKTtcbiAgbGV0IG1vZHVsZXMgPSByZXNvbHZlKF9fZGlybmFtZSwgJ3B1YmxpYy93ZWJwYWNrU2hpbXMvJyk7XG4gIGxldCBzcmMgPSByZXNvbHZlKF9fZGlybmFtZSwgJ3B1YmxpYy9zcmMvJyk7XG4gIGxldCB7IGV4aXN0c1N5bmMgfSA9IHJlcXVpcmUoJ2ZzJyk7XG4gIGNvbnN0IHsgc3RhcnRzV2l0aCwgZW5kc1dpdGggfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4gIGNvbnN0IGFwcHMgPSBbXG4gICAge1xuICAgICAgdGl0bGU6ICdTZW5zZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0pTT04gYXdhcmUgZGV2ZWxvcGVyXFwncyBpbnRlcmZhY2UgdG8gRWxhc3RpY1NlYXJjaCcsXG4gICAgICBpY29uOiAncGx1Z2lucy9zZW5zZS9ib25zYWkucG5nJyxcbiAgICAgIG1haW46ICdwbHVnaW5zL3NlbnNlL3NlbnNlJyxcbiAgICAgIGF1dG9sb2FkOiBraWJhbmEuYXV0b2xvYWQuc3R5bGVzLFxuICAgICAgaW5qZWN0VmFyczogZnVuY3Rpb24gKHNlcnZlciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgIH1cbiAgICB9XG4gIF07XG5cbiAgaWYgKGV4aXN0c1N5bmMocmVzb2x2ZShfX2Rpcm5hbWUsICdwdWJsaWMvdGVzdHMnKSkpIHtcbiAgICBhcHBzLnB1c2goe1xuICAgICAgdGl0bGU6ICdTZW5zZSBUZXN0cycsXG4gICAgICBpZDogJ3NlbnNlLXRlc3RzJyxcbiAgICAgIG1haW46ICdwbHVnaW5zL3NlbnNlL3Rlc3RzJyxcbiAgICAgIGhpZGRlbjogdHJ1ZVxuICAgICAgLy9saXN0ZWQ6IGZhbHNlIC8vIHVuY29tbWVudCBhZnRlciBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9raWJhbmEvcHVsbC80NzU1XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gbmV3IGtpYmFuYS5QbHVnaW4oe1xuICAgIGlkOiAnc2Vuc2UnLFxuXG4gICAgY29uZmlnOiBmdW5jdGlvbiAoSm9pKSB7XG4gICAgICByZXR1cm4gSm9pLm9iamVjdCh7XG4gICAgICAgIGVuYWJsZWQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgZGVmYXVsdFNlcnZlclVybDogSm9pLnN0cmluZygpLmRlZmF1bHQoJ2h0dHA6Ly9sb2NhbGhvc3Q6OTIwMCcpLFxuICAgICAgICBwcm94eUZpbHRlcjogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5zaW5nbGUoKS5kZWZhdWx0KFsnLionXSksXG4gICAgICAgIHNzbDogSm9pLm9iamVjdCh7XG4gICAgICAgICAgdmVyaWZ5OiBKb2kuYm9vbGVhbigpLFxuICAgICAgICB9KS5kZWZhdWx0KCksXG4gICAgICAgIHByb3h5Q29uZmlnOiBKb2kuYXJyYXkoKS5pdGVtcyhcbiAgICAgICAgICBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgICAgICBtYXRjaDogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICAgICAgICBwcm90b2NvbDogSm9pLnN0cmluZygpLmRlZmF1bHQoJyonKSxcbiAgICAgICAgICAgICAgaG9zdDogSm9pLnN0cmluZygpLmRlZmF1bHQoJyonKSxcbiAgICAgICAgICAgICAgcG9ydDogSm9pLnN0cmluZygpLmRlZmF1bHQoJyonKSxcbiAgICAgICAgICAgICAgcGF0aDogSm9pLnN0cmluZygpLmRlZmF1bHQoJyonKVxuICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgIHRpbWVvdXQ6IEpvaS5udW1iZXIoKSxcbiAgICAgICAgICAgIHNzbDogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICAgICAgICB2ZXJpZnk6IEpvaS5ib29sZWFuKCksXG4gICAgICAgICAgICAgIGNhOiBKb2kuYXJyYXkoKS5zaW5nbGUoKS5pdGVtcyhKb2kuc3RyaW5nKCkpLFxuICAgICAgICAgICAgICBjZXJ0OiBKb2kuc3RyaW5nKCksXG4gICAgICAgICAgICAgIGtleTogSm9pLnN0cmluZygpXG4gICAgICAgICAgICB9KS5kZWZhdWx0KClcbiAgICAgICAgICB9KVxuICAgICAgICApLmRlZmF1bHQoW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgICAgIHByb3RvY29sOiAnKicsXG4gICAgICAgICAgICAgIGhvc3Q6ICcqJyxcbiAgICAgICAgICAgICAgcG9ydDogJyonLFxuICAgICAgICAgICAgICBwYXRoOiAnKidcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRpbWVvdXQ6IDE4MDAwMCxcbiAgICAgICAgICAgIHNzbDoge1xuICAgICAgICAgICAgICB2ZXJpZnk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICB9KS5kZWZhdWx0KCk7XG4gICAgfSxcblxuICAgIGluaXQ6IGZ1bmN0aW9uIChzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSBvcHRpb25zLnByb3h5RmlsdGVyLm1hcChzdHIgPT4gbmV3IFJlZ0V4cChzdHIpKTtcblxuICAgICAgaWYgKG9wdGlvbnMuc3NsICYmIG9wdGlvbnMuc3NsLnZlcmlmeSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NlbnNlLnNzbC52ZXJzaW9uIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3h5Q29uZmlnQ29sbGVjdGlvbiA9IG5ldyBQcm94eUNvbmZpZ0NvbGxlY3Rpb24ob3B0aW9ucy5wcm94eUNvbmZpZyk7XG4gICAgICBjb25zdCBwcm94eVJvdXRlQ29uZmlnID0ge1xuICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgIHF1ZXJ5OiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgICAgICB1cmk6IEpvaS5zdHJpbmcoKS51cmkoe1xuICAgICAgICAgICAgICBhbGxvd1JlbGF0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgc2hlbWE6IFsnaHR0cDonLCAnaHR0cHM6J10sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KS51bmtub3duKHRydWUpLFxuICAgICAgICB9LFxuXG4gICAgICAgIHByZTogW1xuICAgICAgICAgIGZ1bmN0aW9uIGZpbHRlclVyaShyZXEsIHJlcGx5KSB7XG4gICAgICAgICAgICBjb25zdCB7IHVyaSB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgICAgICAgICBpZiAoIWZpbHRlcnMuc29tZShyZSA9PiByZS50ZXN0KHVyaSkpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVyciA9IEJvb20uZm9yYmlkZGVuKCk7XG4gICAgICAgICAgICAgIGVyci5vdXRwdXQucGF5bG9hZCA9IFwiRXJyb3IgY29ubmVjdGluZyB0byAnXCIgKyB1cmkgKyBcIic6XFxuXFxuVW5hYmxlIHRvIHNlbmQgcmVxdWVzdHMgdG8gdGhhdCB1cmwuXCI7XG4gICAgICAgICAgICAgIGVyci5vdXRwdXQuaGVhZGVyc1snY29udGVudC10eXBlJ10gPSAndGV4dC9wbGFpbic7XG4gICAgICAgICAgICAgIHJlcGx5KGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXBseSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcblxuICAgICAgICBoYW5kbGVyKHJlcSwgcmVwbHkpIHtcbiAgICAgICAgICBjb25zdCB7IHVyaSB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgICAgICAgcmVwbHkucHJveHkoe1xuICAgICAgICAgICAgdXJpLFxuICAgICAgICAgICAgeGZvcndhcmQ6IHRydWUsXG4gICAgICAgICAgICBwYXNzVGhyb3VnaDogdHJ1ZSxcbiAgICAgICAgICAgIG9uUmVzcG9uc2UoZXJyLCByZXMsIHJlcXVlc3QsIHJlcGx5LCBzZXR0aW5ncywgdHRsKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlcGx5KFwiRXJyb3IgY29ubmVjdGluZyB0byAnXCIgKyByZXF1ZXN0LnF1ZXJ5LnVyaSArIFwiJzpcXG5cXG5cIiArIGVyci5tZXNzYWdlKS50eXBlKFwidGV4dC9wbGFpblwiKS5zdGF0dXNDb2RlID0gNTAyO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcGx5KG51bGwsIHJlcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC4uLnByb3h5Q29uZmlnQ29sbGVjdGlvbi5jb25maWdGb3JVcmkodXJpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlcnZlci5yb3V0ZSh7XG4gICAgICAgIHBhdGg6ICcvYXBpL3NlbnNlL3Byb3h5JyxcbiAgICAgICAgbWV0aG9kOiAnKicsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIC4uLnByb3h5Um91dGVDb25maWcsXG5cbiAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICBvdXRwdXQ6ICdzdHJlYW0nLFxuICAgICAgICAgICAgcGFyc2U6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHNlcnZlci5yb3V0ZSh7XG4gICAgICAgIHBhdGg6ICcvYXBpL3NlbnNlL3Byb3h5JyxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgLi4ucHJveHlSb3V0ZUNvbmZpZ1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICBwYXRoOiAnL2FwaS9zZW5zZS9hcGlfc2VydmVyJyxcbiAgICAgICAgbWV0aG9kOiBbJ0dFVCcsICdQT1NUJ10sXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XG4gICAgICAgICAgbGV0IHNlcnZlciA9IHJlcXVpcmUoJy4vYXBpX3NlcnZlci9zZXJ2ZXInKTtcbiAgICAgICAgICBsZXQge3NlbnNlX3ZlcnNpb24sIGFwaXN9ID0gcmVxLnF1ZXJ5O1xuICAgICAgICAgIGlmICghYXBpcykge1xuICAgICAgICAgICAgcmVwbHkoQm9vbS5iYWRSZXF1ZXN0KCdcImFwaXNcIiBpcyBhIHJlcXVpcmVkIHBhcmFtLicpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gc2VydmVyLnJlc29sdmVBcGkoc2Vuc2VfdmVyc2lvbiwgYXBpcy5zcGxpdChcIixcIiksIHJlcGx5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRlc3RBcHAgPSBraWJhbmEudWlFeHBvcnRzLmFwcHMuaGlkZGVuLmJ5SWRbJ3NlbnNlLXRlc3RzJ107XG4gICAgICBpZiAodGVzdEFwcCkge1xuICAgICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICAgIHBhdGg6ICcvYXBwL3NlbnNlLXRlc3RzJyxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVwbHkucmVuZGVyQXBwKHRlc3RBcHApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVpRXhwb3J0czoge1xuICAgICAgYXBwczogYXBwcyxcblxuICAgICAgbm9QYXJzZTogW1xuICAgICAgICBqb2luKG1vZHVsZXMsICdhY2UnICsgc2VwKSxcbiAgICAgICAgam9pbihtb2R1bGVzLCAnbW9tZW50X3NyYy9tb21lbnQnICsgc2VwKSxcbiAgICAgICAgam9pbihzcmMsICdzZW5zZV9lZGl0b3IvbW9kZS93b3JrZXIuanMnKVxuICAgICAgXVxuICAgIH1cbiAgfSlcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/index.js",
      "sourcesContent": [
        "import { ProxyConfigCollection } from './server/proxy_config_collection';\n\nmodule.exports = function (kibana) {\n  let { resolve, join, sep } = require('path');\n  let Joi = require('joi');\n  let Boom = require('boom');\n  let modules = resolve(__dirname, 'public/webpackShims/');\n  let src = resolve(__dirname, 'public/src/');\n  let { existsSync } = require('fs');\n  const { startsWith, endsWith } = require('lodash');\n\n  const apps = [\n    {\n      title: 'Sense',\n      description: 'JSON aware developer\\'s interface to ElasticSearch',\n      icon: 'plugins/sense/bonsai.png',\n      main: 'plugins/sense/sense',\n      autoload: kibana.autoload.styles,\n      injectVars: function (server, options) {\n        return options;\n      }\n    }\n  ];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Sense Tests',\n      id: 'sense-tests',\n      main: 'plugins/sense/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'sense',\n\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        defaultServerUrl: Joi.string().default('http://localhost:9200'),\n        proxyFilter: Joi.array().items(Joi.string()).single().default(['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean(),\n        }).default(),\n        proxyConfig: Joi.array().items(\n          Joi.object().keys({\n            match: Joi.object().keys({\n              protocol: Joi.string().default('*'),\n              host: Joi.string().default('*'),\n              port: Joi.string().default('*'),\n              path: Joi.string().default('*')\n            }),\n\n            timeout: Joi.number(),\n            ssl: Joi.object().keys({\n              verify: Joi.boolean(),\n              ca: Joi.array().single().items(Joi.string()),\n              cert: Joi.string(),\n              key: Joi.string()\n            }).default()\n          })\n        ).default([\n          {\n            match: {\n              protocol: '*',\n              host: '*',\n              port: '*',\n              path: '*'\n            },\n\n            timeout: 180000,\n            ssl: {\n              verify: true\n            }\n          }\n        ])\n      }).default();\n    },\n\n    init: function (server, options) {\n      const filters = options.proxyFilter.map(str => new RegExp(str));\n\n      if (options.ssl && options.ssl.verify) {\n        throw new Error('sense.ssl.version is no longer supported.');\n      }\n\n      const proxyConfigCollection = new ProxyConfigCollection(options.proxyConfig);\n      const proxyRouteConfig = {\n        validate: {\n          query: Joi.object().keys({\n            uri: Joi.string().uri({\n              allowRelative: false,\n              shema: ['http:', 'https:'],\n            }),\n          }).unknown(true),\n        },\n\n        pre: [\n          function filterUri(req, reply) {\n            const { uri } = req.query;\n\n            if (!filters.some(re => re.test(uri))) {\n              const err = Boom.forbidden();\n              err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n              err.output.headers['content-type'] = 'text/plain';\n              reply(err);\n            } else {\n              reply();\n            }\n          }\n        ],\n\n        handler(req, reply) {\n          const { uri } = req.query;\n\n          reply.proxy({\n            uri,\n            xforward: true,\n            passThrough: true,\n            onResponse(err, res, request, reply, settings, ttl) {\n              if (err != null) {\n                reply(\"Error connecting to '\" + request.query.uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n              } else {\n                reply(null, res);\n              }\n            },\n\n            ...proxyConfigCollection.configForUri(uri)\n          })\n        }\n      };\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: '*',\n        config: {\n          ...proxyRouteConfig,\n\n          payload: {\n            output: 'stream',\n            parse: false\n          },\n        }\n      });\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: 'GET',\n        config: {\n          ...proxyRouteConfig\n        }\n      })\n\n      server.route({\n        path: '/api/sense/api_server',\n        method: ['GET', 'POST'],\n        handler: function (req, reply) {\n          let server = require('./api_server/server');\n          let {sense_version, apis} = req.query;\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      const testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function (req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [\n        join(modules, 'ace' + sep),\n        join(modules, 'moment_src/moment' + sep),\n        join(src, 'sense_editor/mode/worker.js')\n      ]\n    }\n  })\n};\n"
      ]
    },
    "mtime": 1457723837000
  },
  "{\"filename\":\"/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/proxy_config_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "defaultsDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaultsDeep",
                "local": "defaultsDeep"
              }
            ]
          },
          {
            "source": "./proxy_config",
            "imported": [
              "ProxyConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProxyConfig",
                "local": "ProxyConfig"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parseUrl"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProxyConfigCollection"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProxyConfigCollection",
              "exported": "ProxyConfigCollection"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _proxy_config = require('./proxy_config');\n\nvar _url = require('url');\n\nvar ProxyConfigCollection = (function () {\n  function ProxyConfigCollection() {\n    var configs = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    _classCallCheck(this, ProxyConfigCollection);\n\n    this.configs = configs.map(function (settings) {\n      return new _proxy_config.ProxyConfig(settings);\n    });\n  }\n\n  _createClass(ProxyConfigCollection, [{\n    key: 'configForUri',\n    value: function configForUri(uri) {\n      var parsedUri = (0, _url.parse)(uri);\n      var settings = this.configs.map(function (config) {\n        return config.getForParsedUri(parsedUri);\n      });\n      return _lodash.defaultsDeep.apply(undefined, [{}].concat(_toConsumableArray(settings)));\n    }\n  }]);\n\n  return ProxyConfigCollection;\n})();\n\nexports.ProxyConfigCollection = ProxyConfigCollection;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kbWl0cml5LnR1cm92dHNvdi9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtZGFyd2luLXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL3NlcnZlci9wcm94eV9jb25maWdfY29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7c0JBQTZCLFFBQVE7OzRCQUVULGdCQUFnQjs7bUJBQ1YsS0FBSzs7SUFHMUIscUJBQXFCO0FBQ3JCLFdBREEscUJBQXFCLEdBQ047UUFBZCxPQUFPLHlEQUFHLEVBQUU7OzBCQURiLHFCQUFxQjs7QUFFOUIsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQUEsUUFBUTthQUFJLDhCQUFnQixRQUFRLENBQUM7S0FBQSxDQUFDLENBQUE7R0FDbEU7O2VBSFUscUJBQXFCOztXQUtwQixzQkFBQyxHQUFHLEVBQUU7QUFDaEIsVUFBTSxTQUFTLEdBQUcsZ0JBQVMsR0FBRyxDQUFDLENBQUM7QUFDaEMsVUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBQSxNQUFNO2VBQUksTUFBTSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUM7T0FBQSxDQUFDLENBQUM7QUFDL0UsYUFBTyx1Q0FBYSxFQUFFLDRCQUFLLFFBQVEsR0FBQyxDQUFDO0tBQ3RDOzs7U0FUVSxxQkFBcUIiLCJmaWxlIjoiL1VzZXJzL2RtaXRyaXkudHVyb3Z0c292L21hc3Rlci1naXQvZXMtYm9vay1leGFtcGxlL2tpYmFuYS00LjUuMy1kYXJ3aW4teDY0L2luc3RhbGxlZFBsdWdpbnMvc2Vuc2Uvc2VydmVyL3Byb3h5X2NvbmZpZ19jb2xsZWN0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdHNEZWVwIH0gZnJvbSAnbG9kYXNoJ1xuXG5pbXBvcnQgeyBQcm94eUNvbmZpZyB9IGZyb20gJy4vcHJveHlfY29uZmlnJ1xuaW1wb3J0IHsgcGFyc2UgYXMgcGFyc2VVcmwgfSBmcm9tICd1cmwnXG5cblxuZXhwb3J0IGNsYXNzIFByb3h5Q29uZmlnQ29sbGVjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZ3MgPSBbXSkge1xuICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3MubWFwKHNldHRpbmdzID0+IG5ldyBQcm94eUNvbmZpZyhzZXR0aW5ncykpXG4gIH1cblxuICBjb25maWdGb3JVcmkodXJpKSB7XG4gICAgY29uc3QgcGFyc2VkVXJpID0gcGFyc2VVcmwodXJpKTtcbiAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMuY29uZmlncy5tYXAoY29uZmlnID0+IGNvbmZpZy5nZXRGb3JQYXJzZWRVcmkocGFyc2VkVXJpKSk7XG4gICAgcmV0dXJuIGRlZmF1bHRzRGVlcCh7fSwgLi4uc2V0dGluZ3MpO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/proxy_config_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAA6B,QAAQ;;4BAET,gBAAgB;;mBACV,KAAK;;IAG1B,qBAAqB;AACrB,WADA,qBAAqB,GACN;QAAd,OAAO,yDAAG,EAAE;;0BADb,qBAAqB;;AAE9B,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,UAAA,QAAQ;aAAI,8BAAgB,QAAQ,CAAC;KAAA,CAAC,CAAA;GAClE;;eAHU,qBAAqB;;WAKpB,sBAAC,GAAG,EAAE;AAChB,UAAM,SAAS,GAAG,gBAAS,GAAG,CAAC,CAAC;AAChC,UAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM;eAAI,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC;OAAA,CAAC,CAAC;AAC/E,aAAO,uCAAa,EAAE,4BAAK,QAAQ,GAAC,CAAC;KACtC;;;SATU,qBAAqB",
      "file": "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/proxy_config_collection.js",
      "sourcesContent": [
        "import { defaultsDeep } from 'lodash'\n\nimport { ProxyConfig } from './proxy_config'\nimport { parse as parseUrl } from 'url'\n\n\nexport class ProxyConfigCollection {\n  constructor(configs = []) {\n    this.configs = configs.map(settings => new ProxyConfig(settings))\n  }\n\n  configForUri(uri) {\n    const parsedUri = parseUrl(uri);\n    const settings = this.configs.map(config => config.getForParsedUri(parsedUri));\n    return defaultsDeep({}, ...settings);\n  }\n}\n"
      ]
    },
    "mtime": 1457678751000
  },
  "{\"filename\":\"/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/proxy_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "memoize",
              "values"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              },
              {
                "kind": "named",
                "imported": "values",
                "local": "values"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "https",
            "imported": [
              "Agent"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Agent",
                "local": "HttpsAgent"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          },
          {
            "source": "./wildcard_matcher",
            "imported": [
              "WildcardMatcher"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "WildcardMatcher",
                "local": "WildcardMatcher"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProxyConfig"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProxyConfig",
              "exported": "ProxyConfig"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _url = require('url');\n\nvar _https = require('https');\n\nvar _fs = require('fs');\n\nvar _wildcard_matcher = require('./wildcard_matcher');\n\nvar makeHttpsAgent = (0, _lodash.memoize)(function (opts) {\n  return new _https.Agent(opts);\n}, function (opts) {\n  return JSON.stringify(opts);\n});\n\nvar ProxyConfig = (function () {\n  function ProxyConfig(config) {\n    _classCallCheck(this, ProxyConfig);\n\n    config = Object.assign({}, config);\n\n    // -----\n    // read \"match\" info\n    // -----\n    var rawMatches = Object.assign({}, config.match);\n    this.id = (0, _url.format)({\n      protocol: rawMatches.protocol,\n      hostname: rawMatches.host,\n      port: rawMatches.port,\n      pathname: rawMatches.path\n    }) || '*';\n\n    this.matchers = {\n      protocol: new _wildcard_matcher.WildcardMatcher(rawMatches.protocol),\n      host: new _wildcard_matcher.WildcardMatcher(rawMatches.host),\n      port: new _wildcard_matcher.WildcardMatcher(rawMatches.port),\n      path: new _wildcard_matcher.WildcardMatcher(rawMatches.path, '/')\n    };\n\n    // -----\n    // read config vars\n    // -----\n    this.timeout = config.timeout;\n    this.sslAgent = this._makeSslAgent(config);\n  }\n\n  _createClass(ProxyConfig, [{\n    key: '_makeSslAgent',\n    value: function _makeSslAgent(config) {\n      var ssl = config.ssl || {};\n      this.verifySsl = ssl.verify;\n\n      var sslAgentOpts = {\n        ca: ssl.ca && ssl.ca.map(function (ca) {\n          return (0, _fs.readFileSync)(ca);\n        }),\n        cert: ssl.cert && (0, _fs.readFileSync)(ssl.cert),\n        key: ssl.key && (0, _fs.readFileSync)(ssl.key)\n      };\n\n      if ((0, _lodash.values)(sslAgentOpts).filter(Boolean).length) {\n        return new _https.Agent(sslAgentOpts);\n      }\n    }\n  }, {\n    key: 'getForParsedUri',\n    value: function getForParsedUri(_ref) {\n      var protocol = _ref.protocol;\n      var hostname = _ref.hostname;\n      var port = _ref.port;\n      var pathname = _ref.pathname;\n\n      var match = this.matchers.protocol.match(protocol.slice(0, -1));\n      match = match && this.matchers.host.match(hostname);\n      match = match && this.matchers.port.match(port);\n      match = match && this.matchers.path.match(pathname);\n\n      if (!match) return {};\n      return {\n        timeout: this.timeout,\n        rejectUnauthorized: this.sslAgent ? true : this.verifySsl,\n        agent: protocol === 'https:' ? this.sslAgent : undefined\n      };\n    }\n  }]);\n\n  return ProxyConfig;\n})();\n\nexports.ProxyConfig = ProxyConfig;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kbWl0cml5LnR1cm92dHNvdi9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtZGFyd2luLXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL3NlcnZlci9wcm94eV9jb25maWcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztzQkFBZ0MsUUFBUTs7bUJBQ0osS0FBSzs7cUJBQ0wsT0FBTzs7a0JBQ2QsSUFBSTs7Z0NBRUQsb0JBQW9COztBQUVwRCxJQUFNLGNBQWMsR0FBRyxxQkFDckIsVUFBQSxJQUFJO1NBQUksaUJBQWUsSUFBSSxDQUFDO0NBQUEsRUFDNUIsVUFBQSxJQUFJO1NBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7Q0FBQSxDQUM3QixDQUFBOztJQUVZLFdBQVc7QUFDWCxXQURBLFdBQVcsQ0FDVixNQUFNLEVBQUU7MEJBRFQsV0FBVzs7QUFFcEIsVUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDOzs7OztBQUtuQyxRQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkQsUUFBSSxDQUFDLEVBQUUsR0FBRyxpQkFBVTtBQUNsQixjQUFRLEVBQUUsVUFBVSxDQUFDLFFBQVE7QUFDN0IsY0FBUSxFQUFFLFVBQVUsQ0FBQyxJQUFJO0FBQ3pCLFVBQUksRUFBRSxVQUFVLENBQUMsSUFBSTtBQUNyQixjQUFRLEVBQUUsVUFBVSxDQUFDLElBQUk7S0FDMUIsQ0FBQyxJQUFJLEdBQUcsQ0FBQzs7QUFFVixRQUFJLENBQUMsUUFBUSxHQUFHO0FBQ2QsY0FBUSxFQUFFLHNDQUFvQixVQUFVLENBQUMsUUFBUSxDQUFDO0FBQ2xELFVBQUksRUFBRSxzQ0FBb0IsVUFBVSxDQUFDLElBQUksQ0FBQztBQUMxQyxVQUFJLEVBQUUsc0NBQW9CLFVBQVUsQ0FBQyxJQUFJLENBQUM7QUFDMUMsVUFBSSxFQUFFLHNDQUFvQixVQUFVLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztLQUNoRCxDQUFDOzs7OztBQUtGLFFBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUM5QixRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7R0FDNUM7O2VBM0JVLFdBQVc7O1dBNkJULHVCQUFDLE1BQU0sRUFBRTtBQUNwQixVQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQztBQUM3QixVQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7O0FBRTVCLFVBQU0sWUFBWSxHQUFHO0FBQ25CLFVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQUEsRUFBRTtpQkFBSSxzQkFBYSxFQUFFLENBQUM7U0FBQSxDQUFDO0FBQ2hELFlBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJLHNCQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDeEMsV0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksc0JBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQztPQUN0QyxDQUFDOztBQUVGLFVBQUksb0JBQU8sWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRTtBQUMvQyxlQUFPLGlCQUFlLFlBQVksQ0FBQyxDQUFDO09BQ3JDO0tBQ0Y7OztXQUVjLHlCQUFDLElBQXNDLEVBQUU7VUFBdEMsUUFBUSxHQUFWLElBQXNDLENBQXBDLFFBQVE7VUFBRSxRQUFRLEdBQXBCLElBQXNDLENBQTFCLFFBQVE7VUFBRSxJQUFJLEdBQTFCLElBQXNDLENBQWhCLElBQUk7VUFBRSxRQUFRLEdBQXBDLElBQXNDLENBQVYsUUFBUTs7QUFDbEQsVUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxXQUFLLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNwRCxXQUFLLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRCxXQUFLLEdBQUcsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFcEQsVUFBSSxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsQ0FBQztBQUN0QixhQUFPO0FBQ0wsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLDBCQUFrQixFQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTO0FBQ3pELGFBQUssRUFBRSxRQUFRLEtBQUssUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUztPQUN6RCxDQUFDO0tBQ0g7OztTQXhEVSxXQUFXIiwiZmlsZSI6Ii9Vc2Vycy9kbWl0cml5LnR1cm92dHNvdi9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtZGFyd2luLXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL3NlcnZlci9wcm94eV9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZW1vaXplLCB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgeyBmb3JtYXQgYXMgZm9ybWF0VXJsIH0gZnJvbSAndXJsJ1xuaW1wb3J0IHsgQWdlbnQgYXMgSHR0cHNBZ2VudCB9IGZyb20gJ2h0dHBzJ1xuaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnXG5cbmltcG9ydCB7IFdpbGRjYXJkTWF0Y2hlciB9IGZyb20gJy4vd2lsZGNhcmRfbWF0Y2hlcidcblxuY29uc3QgbWFrZUh0dHBzQWdlbnQgPSBtZW1vaXplKFxuICBvcHRzID0+IG5ldyBIdHRwc0FnZW50KG9wdHMpLFxuICBvcHRzID0+IEpTT04uc3RyaW5naWZ5KG9wdHMpXG4pXG5cbmV4cG9ydCBjbGFzcyBQcm94eUNvbmZpZyB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XG5cbiAgICAvLyAtLS0tLVxuICAgIC8vIHJlYWQgXCJtYXRjaFwiIGluZm9cbiAgICAvLyAtLS0tLVxuICAgIGNvbnN0IHJhd01hdGNoZXMgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcubWF0Y2gpO1xuICAgIHRoaXMuaWQgPSBmb3JtYXRVcmwoe1xuICAgICAgcHJvdG9jb2w6IHJhd01hdGNoZXMucHJvdG9jb2wsXG4gICAgICBob3N0bmFtZTogcmF3TWF0Y2hlcy5ob3N0LFxuICAgICAgcG9ydDogcmF3TWF0Y2hlcy5wb3J0LFxuICAgICAgcGF0aG5hbWU6IHJhd01hdGNoZXMucGF0aFxuICAgIH0pIHx8ICcqJztcblxuICAgIHRoaXMubWF0Y2hlcnMgPSB7XG4gICAgICBwcm90b2NvbDogbmV3IFdpbGRjYXJkTWF0Y2hlcihyYXdNYXRjaGVzLnByb3RvY29sKSxcbiAgICAgIGhvc3Q6IG5ldyBXaWxkY2FyZE1hdGNoZXIocmF3TWF0Y2hlcy5ob3N0KSxcbiAgICAgIHBvcnQ6IG5ldyBXaWxkY2FyZE1hdGNoZXIocmF3TWF0Y2hlcy5wb3J0KSxcbiAgICAgIHBhdGg6IG5ldyBXaWxkY2FyZE1hdGNoZXIocmF3TWF0Y2hlcy5wYXRoLCAnLycpLFxuICAgIH07XG5cbiAgICAvLyAtLS0tLVxuICAgIC8vIHJlYWQgY29uZmlnIHZhcnNcbiAgICAvLyAtLS0tLVxuICAgIHRoaXMudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuICAgIHRoaXMuc3NsQWdlbnQgPSB0aGlzLl9tYWtlU3NsQWdlbnQoY29uZmlnKTtcbiAgfVxuXG4gIF9tYWtlU3NsQWdlbnQoY29uZmlnKSB7XG4gICAgY29uc3Qgc3NsID0gY29uZmlnLnNzbCB8fCB7fTtcbiAgICB0aGlzLnZlcmlmeVNzbCA9IHNzbC52ZXJpZnk7XG5cbiAgICBjb25zdCBzc2xBZ2VudE9wdHMgPSB7XG4gICAgICBjYTogc3NsLmNhICYmIHNzbC5jYS5tYXAoY2EgPT4gcmVhZEZpbGVTeW5jKGNhKSksXG4gICAgICBjZXJ0OiBzc2wuY2VydCAmJiByZWFkRmlsZVN5bmMoc3NsLmNlcnQpLFxuICAgICAga2V5OiBzc2wua2V5ICYmIHJlYWRGaWxlU3luYyhzc2wua2V5KSxcbiAgICB9O1xuXG4gICAgaWYgKHZhbHVlcyhzc2xBZ2VudE9wdHMpLmZpbHRlcihCb29sZWFuKS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBuZXcgSHR0cHNBZ2VudChzc2xBZ2VudE9wdHMpO1xuICAgIH1cbiAgfVxuXG4gIGdldEZvclBhcnNlZFVyaSh7IHByb3RvY29sLCBob3N0bmFtZSwgcG9ydCwgcGF0aG5hbWUgfSkge1xuICAgIGxldCBtYXRjaCA9IHRoaXMubWF0Y2hlcnMucHJvdG9jb2wubWF0Y2gocHJvdG9jb2wuc2xpY2UoMCwgLTEpKTtcbiAgICBtYXRjaCA9IG1hdGNoICYmIHRoaXMubWF0Y2hlcnMuaG9zdC5tYXRjaChob3N0bmFtZSk7XG4gICAgbWF0Y2ggPSBtYXRjaCAmJiB0aGlzLm1hdGNoZXJzLnBvcnQubWF0Y2gocG9ydCk7XG4gICAgbWF0Y2ggPSBtYXRjaCAmJiB0aGlzLm1hdGNoZXJzLnBhdGgubWF0Y2gocGF0aG5hbWUpO1xuXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIHt9O1xuICAgIHJldHVybiB7XG4gICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IHRoaXMuc3NsQWdlbnQgPyB0cnVlIDogdGhpcy52ZXJpZnlTc2wsXG4gICAgICBhZ2VudDogcHJvdG9jb2wgPT09ICdodHRwczonID8gdGhpcy5zc2xBZ2VudCA6IHVuZGVmaW5lZFxuICAgIH07XG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/proxy_config.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/proxy_config.js",
      "sourcesContent": [
        "import { memoize, values } from 'lodash'\nimport { format as formatUrl } from 'url'\nimport { Agent as HttpsAgent } from 'https'\nimport { readFileSync } from 'fs'\n\nimport { WildcardMatcher } from './wildcard_matcher'\n\nconst makeHttpsAgent = memoize(\n  opts => new HttpsAgent(opts),\n  opts => JSON.stringify(opts)\n)\n\nexport class ProxyConfig {\n  constructor(config) {\n    config = Object.assign({}, config);\n\n    // -----\n    // read \"match\" info\n    // -----\n    const rawMatches = Object.assign({}, config.match);\n    this.id = formatUrl({\n      protocol: rawMatches.protocol,\n      hostname: rawMatches.host,\n      port: rawMatches.port,\n      pathname: rawMatches.path\n    }) || '*';\n\n    this.matchers = {\n      protocol: new WildcardMatcher(rawMatches.protocol),\n      host: new WildcardMatcher(rawMatches.host),\n      port: new WildcardMatcher(rawMatches.port),\n      path: new WildcardMatcher(rawMatches.path, '/'),\n    };\n\n    // -----\n    // read config vars\n    // -----\n    this.timeout = config.timeout;\n    this.sslAgent = this._makeSslAgent(config);\n  }\n\n  _makeSslAgent(config) {\n    const ssl = config.ssl || {};\n    this.verifySsl = ssl.verify;\n\n    const sslAgentOpts = {\n      ca: ssl.ca && ssl.ca.map(ca => readFileSync(ca)),\n      cert: ssl.cert && readFileSync(ssl.cert),\n      key: ssl.key && readFileSync(ssl.key),\n    };\n\n    if (values(sslAgentOpts).filter(Boolean).length) {\n      return new HttpsAgent(sslAgentOpts);\n    }\n  }\n\n  getForParsedUri({ protocol, hostname, port, pathname }) {\n    let match = this.matchers.protocol.match(protocol.slice(0, -1));\n    match = match && this.matchers.host.match(hostname);\n    match = match && this.matchers.port.match(port);\n    match = match && this.matchers.path.match(pathname);\n\n    if (!match) return {};\n    return {\n      timeout: this.timeout,\n      rejectUnauthorized: this.sslAgent ? true : this.verifySsl,\n      agent: protocol === 'https:' ? this.sslAgent : undefined\n    };\n  }\n}\n"
      ]
    },
    "mtime": 1457681754000
  },
  "{\"filename\":\"/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/wildcard_matcher.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "minimatch",
            "imported": [
              "Minimatch"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Minimatch",
                "local": "Minimatch"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "WildcardMatcher"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "WildcardMatcher",
              "exported": "WildcardMatcher"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _minimatch = require('minimatch');\n\nvar WildcardMatcher = (function () {\n  function WildcardMatcher(wildcardPattern, emptyVal) {\n    _classCallCheck(this, WildcardMatcher);\n\n    this.emptyVal = emptyVal;\n    this.pattern = String(wildcardPattern || '*');\n    this.matcher = new _minimatch.Minimatch(this.pattern, {\n      noglobstar: true,\n      dot: true,\n      nocase: true,\n      matchBase: true,\n      nocomment: true\n    });\n  }\n\n  _createClass(WildcardMatcher, [{\n    key: 'match',\n    value: function match(candidate) {\n      var empty = !candidate || candidate === this.emptyVal;\n      if (empty && this.pattern === '*') {\n        return true;\n      }\n\n      return this.matcher.match(candidate || '');\n    }\n  }]);\n\n  return WildcardMatcher;\n})();\n\nexports.WildcardMatcher = WildcardMatcher;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kbWl0cml5LnR1cm92dHNvdi9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtZGFyd2luLXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL3NlcnZlci93aWxkY2FyZF9tYXRjaGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7eUJBQTBCLFdBQVc7O0lBRXhCLGVBQWU7QUFDZixXQURBLGVBQWUsQ0FDZCxlQUFlLEVBQUUsUUFBUSxFQUFFOzBCQUQ1QixlQUFlOztBQUV4QixRQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUN6QixRQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxlQUFlLElBQUksR0FBRyxDQUFDLENBQUM7QUFDOUMsUUFBSSxDQUFDLE9BQU8sR0FBRyx5QkFBYyxJQUFJLENBQUMsT0FBTyxFQUFFO0FBQ3pDLGdCQUFVLEVBQUUsSUFBSTtBQUNoQixTQUFHLEVBQUUsSUFBSTtBQUNULFlBQU0sRUFBRSxJQUFJO0FBQ1osZUFBUyxFQUFFLElBQUk7QUFDZixlQUFTLEVBQUUsSUFBSTtLQUNoQixDQUFDLENBQUE7R0FDSDs7ZUFYVSxlQUFlOztXQWFyQixlQUFDLFNBQVMsRUFBRTtBQUNmLFVBQU0sS0FBSyxHQUFHLENBQUMsU0FBUyxJQUFJLFNBQVMsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQ3hELFVBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssR0FBRyxFQUFFO0FBQ2pDLGVBQU8sSUFBSSxDQUFDO09BQ2I7O0FBRUQsYUFBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLElBQUksRUFBRSxDQUFDLENBQUE7S0FDM0M7OztTQXBCVSxlQUFlIiwiZmlsZSI6Ii9Vc2Vycy9kbWl0cml5LnR1cm92dHNvdi9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtZGFyd2luLXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL3NlcnZlci93aWxkY2FyZF9tYXRjaGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWluaW1hdGNoIH0gZnJvbSAnbWluaW1hdGNoJ1xuXG5leHBvcnQgY2xhc3MgV2lsZGNhcmRNYXRjaGVyIHtcbiAgY29uc3RydWN0b3Iod2lsZGNhcmRQYXR0ZXJuLCBlbXB0eVZhbCkge1xuICAgIHRoaXMuZW1wdHlWYWwgPSBlbXB0eVZhbDtcbiAgICB0aGlzLnBhdHRlcm4gPSBTdHJpbmcod2lsZGNhcmRQYXR0ZXJuIHx8ICcqJyk7XG4gICAgdGhpcy5tYXRjaGVyID0gbmV3IE1pbmltYXRjaCh0aGlzLnBhdHRlcm4sIHtcbiAgICAgIG5vZ2xvYnN0YXI6IHRydWUsXG4gICAgICBkb3Q6IHRydWUsXG4gICAgICBub2Nhc2U6IHRydWUsXG4gICAgICBtYXRjaEJhc2U6IHRydWUsXG4gICAgICBub2NvbW1lbnQ6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgbWF0Y2goY2FuZGlkYXRlKSB7XG4gICAgY29uc3QgZW1wdHkgPSAhY2FuZGlkYXRlIHx8IGNhbmRpZGF0ZSA9PT0gdGhpcy5lbXB0eVZhbDtcbiAgICBpZiAoZW1wdHkgJiYgdGhpcy5wYXR0ZXJuID09PSAnKicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm1hdGNoZXIubWF0Y2goY2FuZGlkYXRlIHx8ICcnKVxuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/wildcard_matcher.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;yBAA0B,WAAW;;IAExB,eAAe;AACf,WADA,eAAe,CACd,eAAe,EAAE,QAAQ,EAAE;0BAD5B,eAAe;;AAExB,QAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,eAAe,IAAI,GAAG,CAAC,CAAC;AAC9C,QAAI,CAAC,OAAO,GAAG,yBAAc,IAAI,CAAC,OAAO,EAAE;AACzC,gBAAU,EAAE,IAAI;AAChB,SAAG,EAAE,IAAI;AACT,YAAM,EAAE,IAAI;AACZ,eAAS,EAAE,IAAI;AACf,eAAS,EAAE,IAAI;KAChB,CAAC,CAAA;GACH;;eAXU,eAAe;;WAarB,eAAC,SAAS,EAAE;AACf,UAAM,KAAK,GAAG,CAAC,SAAS,IAAI,SAAS,KAAK,IAAI,CAAC,QAAQ,CAAC;AACxD,UAAI,KAAK,IAAI,IAAI,CAAC,OAAO,KAAK,GAAG,EAAE;AACjC,eAAO,IAAI,CAAC;OACb;;AAED,aAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,CAAA;KAC3C;;;SApBU,eAAe",
      "file": "/Users/dmitriy.turovtsov/master-git/es-book-example/kibana-4.5.3-darwin-x64/installedPlugins/sense/server/wildcard_matcher.js",
      "sourcesContent": [
        "import { Minimatch } from 'minimatch'\n\nexport class WildcardMatcher {\n  constructor(wildcardPattern, emptyVal) {\n    this.emptyVal = emptyVal;\n    this.pattern = String(wildcardPattern || '*');\n    this.matcher = new Minimatch(this.pattern, {\n      noglobstar: true,\n      dot: true,\n      nocase: true,\n      matchBase: true,\n      nocomment: true\n    })\n  }\n\n  match(candidate) {\n    const empty = !candidate || candidate === this.emptyVal;\n    if (empty && this.pattern === '*') {\n      return true;\n    }\n\n    return this.matcher.match(candidate || '')\n  }\n}\n"
      ]
    },
    "mtime": 1457678751000
  }
}