{
  "{\"filename\":\"/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./server/proxy_config_collection",
            "imported": [
              "ProxyConfigCollection"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProxyConfigCollection",
                "local": "ProxyConfigCollection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "extends"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _serverProxy_config_collection = require('./server/proxy_config_collection');\n\nmodule.exports = function (kibana) {\n  var _require = require('path');\n\n  var resolve = _require.resolve;\n  var join = _require.join;\n  var sep = _require.sep;\n\n  var Joi = require('joi');\n  var Boom = require('boom');\n  var modules = resolve(__dirname, 'public/webpackShims/');\n  var src = resolve(__dirname, 'public/src/');\n\n  var _require2 = require('fs');\n\n  var existsSync = _require2.existsSync;\n\n  var _require3 = require('lodash');\n\n  var startsWith = _require3.startsWith;\n  var endsWith = _require3.endsWith;\n\n  var apps = [{\n    title: 'Sense',\n    description: 'JSON aware developer\\'s interface to ElasticSearch',\n    icon: 'plugins/sense/bonsai.png',\n    main: 'plugins/sense/sense',\n    autoload: kibana.autoload.styles,\n    injectVars: function injectVars(server, options) {\n      return options;\n    }\n  }];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Sense Tests',\n      id: 'sense-tests',\n      main: 'plugins/sense/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'sense',\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        defaultServerUrl: Joi.string()['default']('http://localhost:9200'),\n        proxyFilter: Joi.array().items(Joi.string()).single()['default'](['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean()\n        })['default'](),\n        proxyConfig: Joi.array().items(Joi.object().keys({\n          match: Joi.object().keys({\n            protocol: Joi.string()['default']('*'),\n            host: Joi.string()['default']('*'),\n            port: Joi.string()['default']('*'),\n            path: Joi.string()['default']('*')\n          }),\n\n          timeout: Joi.number(),\n          ssl: Joi.object().keys({\n            verify: Joi.boolean(),\n            ca: Joi.array().single().items(Joi.string()),\n            cert: Joi.string(),\n            key: Joi.string()\n          })['default']()\n        }))['default']([{\n          match: {\n            protocol: '*',\n            host: '*',\n            port: '*',\n            path: '*'\n          },\n\n          timeout: 180000,\n          ssl: {\n            verify: true\n          }\n        }])\n      })['default']();\n    },\n\n    init: function init(server, options) {\n      var filters = options.proxyFilter.map(function (str) {\n        return new RegExp(str);\n      });\n\n      if (options.ssl && options.ssl.verify) {\n        throw new Error('sense.ssl.version is no longer supported.');\n      }\n\n      var proxyConfigCollection = new _serverProxy_config_collection.ProxyConfigCollection(options.proxyConfig);\n      var proxyRouteConfig = {\n        validate: {\n          query: Joi.object().keys({\n            uri: Joi.string().uri({\n              allowRelative: false,\n              shema: ['http:', 'https:']\n            })\n          }).unknown(true)\n        },\n\n        pre: [function filterUri(req, reply) {\n          var uri = req.query.uri;\n\n          if (!filters.some(function (re) {\n            return re.test(uri);\n          })) {\n            var err = Boom.forbidden();\n            err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n            err.output.headers['content-type'] = 'text/plain';\n            reply(err);\n          } else {\n            reply();\n          }\n        }],\n\n        handler: function handler(req, reply) {\n          var uri = req.query.uri;\n\n          reply.proxy(_extends({\n            uri: uri,\n            xforward: true,\n            passThrough: true,\n            onResponse: function onResponse(err, res, request, reply, settings, ttl) {\n              if (err != null) {\n                reply(\"Error connecting to '\" + request.query.uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n              } else {\n                reply(null, res);\n              }\n            }\n\n          }, proxyConfigCollection.configForUri(uri)));\n        }\n      };\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: '*',\n        config: _extends({}, proxyRouteConfig, {\n\n          payload: {\n            output: 'stream',\n            parse: false\n          }\n        })\n      });\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: 'GET',\n        config: _extends({}, proxyRouteConfig)\n      });\n\n      server.route({\n        path: '/api/sense/api_server',\n        method: ['GET', 'POST'],\n        handler: function handler(req, reply) {\n          var server = require('./api_server/server');\n          var _req$query = req.query;\n          var sense_version = _req$query.sense_version;\n          var apis = _req$query.apis;\n\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      var testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function handler(req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [join(modules, 'ace' + sep), join(modules, 'moment_src/moment' + sep), join(src, 'sense_editor/mode/worker.js')]\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RpbS9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtbGludXgteDY0L2luc3RhbGxlZFBsdWdpbnMvc2Vuc2UvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs2Q0FBc0Msa0NBQWtDOztBQUV4RSxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFO2lCQUNKLE9BQU8sQ0FBQyxNQUFNLENBQUM7O01BQXRDLE9BQU8sWUFBUCxPQUFPO01BQUUsSUFBSSxZQUFKLElBQUk7TUFBRSxHQUFHLFlBQUgsR0FBRzs7QUFDeEIsTUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLE1BQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMzQixNQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLHNCQUFzQixDQUFDLENBQUM7QUFDekQsTUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsQ0FBQzs7a0JBQ3ZCLE9BQU8sQ0FBQyxJQUFJLENBQUM7O01BQTVCLFVBQVUsYUFBVixVQUFVOztrQkFDaUIsT0FBTyxDQUFDLFFBQVEsQ0FBQzs7TUFBMUMsVUFBVSxhQUFWLFVBQVU7TUFBRSxRQUFRLGFBQVIsUUFBUTs7QUFFNUIsTUFBTSxJQUFJLEdBQUcsQ0FDWDtBQUNFLFNBQUssRUFBRSxPQUFPO0FBQ2QsZUFBVyxFQUFFLG9EQUFvRDtBQUNqRSxRQUFJLEVBQUUsMEJBQTBCO0FBQ2hDLFFBQUksRUFBRSxxQkFBcUI7QUFDM0IsWUFBUSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTTtBQUNoQyxjQUFVLEVBQUUsb0JBQVUsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUNyQyxhQUFPLE9BQU8sQ0FBQztLQUNoQjtHQUNGLENBQ0YsQ0FBQzs7QUFFRixNQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLGNB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QWIsYUFBYTtjQUFFLElBQUksY0FBSixJQUFJOztBQUN4QixjQUFJLENBQUMsSUFBSSxFQUFFO0FBQ1QsaUJBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLDZCQUE2QixDQUFDLENBQUMsQ0FBQztBQUN0RCxtQkFBTztXQUNSOztBQUVELGlCQUFPLE1BQU0sQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDakU7T0FDRixDQUFDLENBQUM7O0FBRUgsVUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNqRSxVQUFJLE9BQU8sRUFBRTtBQUNYLGNBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxjQUFJLEVBQUUsa0JBQWtCO0FBQ3hCLGdCQUFNLEVBQUUsS0FBSztBQUNiLGlCQUFPLEVBQUUsaUJBQVUsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM3QixtQkFBTyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1dBQ2pDO1NBQ0YsQ0FBQyxDQUFDO09BQ0o7S0FDRjs7QUFFRCxhQUFTLEVBQUU7QUFDVCxVQUFJLEVBQUUsSUFBSTs7QUFFVixhQUFPLEVBQUUsQ0FDUCxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssR0FBRyxHQUFHLENBQUMsRUFDMUIsSUFBSSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsR0FBRyxHQUFHLENBQUMsRUFDeEMsSUFBSSxDQUFDLEdBQUcsRUFBRSw2QkFBNkIsQ0FBQyxDQUN6QztLQUNGO0dBQ0YsQ0FBQyxDQUFBO0NBQ0gsQ0FBQyIsImZpbGUiOiIvaG9tZS9kaW0vbWFzdGVyLWdpdC9lcy1ib29rLWV4YW1wbGUva2liYW5hLTQuNS4zLWxpbnV4LXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJveHlDb25maWdDb2xsZWN0aW9uIH0gZnJvbSAnLi9zZXJ2ZXIvcHJveHlfY29uZmlnX2NvbGxlY3Rpb24nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChraWJhbmEpIHtcbiAgbGV0IHsgcmVzb2x2ZSwgam9pbiwgc2VwIH0gPSByZXF1aXJlKCdwYXRoJyk7XG4gIGxldCBKb2kgPSByZXF1aXJlKCdqb2knKTtcbiAgbGV0IEJvb20gPSByZXF1aXJlKCdib29tJyk7XG4gIGxldCBtb2R1bGVzID0gcmVzb2x2ZShfX2Rpcm5hbWUsICdwdWJsaWMvd2VicGFja1NoaW1zLycpO1xuICBsZXQgc3JjID0gcmVzb2x2ZShfX2Rpcm5hbWUsICdwdWJsaWMvc3JjLycpO1xuICBsZXQgeyBleGlzdHNTeW5jIH0gPSByZXF1aXJlKCdmcycpO1xuICBjb25zdCB7IHN0YXJ0c1dpdGgsIGVuZHNXaXRoIH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuICBjb25zdCBhcHBzID0gW1xuICAgIHtcbiAgICAgIHRpdGxlOiAnU2Vuc2UnLFxuICAgICAgZGVzY3JpcHRpb246ICdKU09OIGF3YXJlIGRldmVsb3BlclxcJ3MgaW50ZXJmYWNlIHRvIEVsYXN0aWNTZWFyY2gnLFxuICAgICAgaWNvbjogJ3BsdWdpbnMvc2Vuc2UvYm9uc2FpLnBuZycsXG4gICAgICBtYWluOiAncGx1Z2lucy9zZW5zZS9zZW5zZScsXG4gICAgICBhdXRvbG9hZDoga2liYW5hLmF1dG9sb2FkLnN0eWxlcyxcbiAgICAgIGluamVjdFZhcnM6IGZ1bmN0aW9uIChzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICB9XG4gICAgfVxuICBdO1xuXG4gIGlmIChleGlzdHNTeW5jKHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljL3Rlc3RzJykpKSB7XG4gICAgYXBwcy5wdXNoKHtcbiAgICAgIHRpdGxlOiAnU2Vuc2UgVGVzdHMnLFxuICAgICAgaWQ6ICdzZW5zZS10ZXN0cycsXG4gICAgICBtYWluOiAncGx1Z2lucy9zZW5zZS90ZXN0cycsXG4gICAgICBoaWRkZW46IHRydWVcbiAgICAgIC8vbGlzdGVkOiBmYWxzZSAvLyB1bmNvbW1lbnQgYWZ0ZXIgaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL3B1bGwvNDc1NVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBraWJhbmEuUGx1Z2luKHtcbiAgICBpZDogJ3NlbnNlJyxcblxuICAgIGNvbmZpZzogZnVuY3Rpb24gKEpvaSkge1xuICAgICAgcmV0dXJuIEpvaS5vYmplY3Qoe1xuICAgICAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICAgIGRlZmF1bHRTZXJ2ZXJVcmw6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCdodHRwOi8vbG9jYWxob3N0OjkyMDAnKSxcbiAgICAgICAgcHJveHlGaWx0ZXI6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKSkuc2luZ2xlKCkuZGVmYXVsdChbJy4qJ10pLFxuICAgICAgICBzc2w6IEpvaS5vYmplY3Qoe1xuICAgICAgICAgIHZlcmlmeTogSm9pLmJvb2xlYW4oKSxcbiAgICAgICAgfSkuZGVmYXVsdCgpLFxuICAgICAgICBwcm94eUNvbmZpZzogSm9pLmFycmF5KCkuaXRlbXMoXG4gICAgICAgICAgSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICAgICAgbWF0Y2g6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgICAgICAgcHJvdG9jb2w6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJyksXG4gICAgICAgICAgICAgIGhvc3Q6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJyksXG4gICAgICAgICAgICAgIHBvcnQ6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJyksXG4gICAgICAgICAgICAgIHBhdGg6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCcqJylcbiAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICB0aW1lb3V0OiBKb2kubnVtYmVyKCksXG4gICAgICAgICAgICBzc2w6IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgICAgICAgdmVyaWZ5OiBKb2kuYm9vbGVhbigpLFxuICAgICAgICAgICAgICBjYTogSm9pLmFycmF5KCkuc2luZ2xlKCkuaXRlbXMoSm9pLnN0cmluZygpKSxcbiAgICAgICAgICAgICAgY2VydDogSm9pLnN0cmluZygpLFxuICAgICAgICAgICAgICBrZXk6IEpvaS5zdHJpbmcoKVxuICAgICAgICAgICAgfSkuZGVmYXVsdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5kZWZhdWx0KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtYXRjaDoge1xuICAgICAgICAgICAgICBwcm90b2NvbDogJyonLFxuICAgICAgICAgICAgICBob3N0OiAnKicsXG4gICAgICAgICAgICAgIHBvcnQ6ICcqJyxcbiAgICAgICAgICAgICAgcGF0aDogJyonXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB0aW1lb3V0OiAxODAwMDAsXG4gICAgICAgICAgICBzc2w6IHtcbiAgICAgICAgICAgICAgdmVyaWZ5OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgfSkuZGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0gb3B0aW9ucy5wcm94eUZpbHRlci5tYXAoc3RyID0+IG5ldyBSZWdFeHAoc3RyKSk7XG5cbiAgICAgIGlmIChvcHRpb25zLnNzbCAmJiBvcHRpb25zLnNzbC52ZXJpZnkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZW5zZS5zc2wudmVyc2lvbiBpcyBubyBsb25nZXIgc3VwcG9ydGVkLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm94eUNvbmZpZ0NvbGxlY3Rpb24gPSBuZXcgUHJveHlDb25maWdDb2xsZWN0aW9uKG9wdGlvbnMucHJveHlDb25maWcpO1xuICAgICAgY29uc3QgcHJveHlSb3V0ZUNvbmZpZyA9IHtcbiAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICBxdWVyeTogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgICAgICAgdXJpOiBKb2kuc3RyaW5nKCkudXJpKHtcbiAgICAgICAgICAgICAgYWxsb3dSZWxhdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgIHNoZW1hOiBbJ2h0dHA6JywgJ2h0dHBzOiddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSkudW5rbm93bih0cnVlKSxcbiAgICAgICAgfSxcblxuICAgICAgICBwcmU6IFtcbiAgICAgICAgICBmdW5jdGlvbiBmaWx0ZXJVcmkocmVxLCByZXBseSkge1xuICAgICAgICAgICAgY29uc3QgeyB1cmkgfSA9IHJlcS5xdWVyeTtcblxuICAgICAgICAgICAgaWYgKCFmaWx0ZXJzLnNvbWUocmUgPT4gcmUudGVzdCh1cmkpKSkge1xuICAgICAgICAgICAgICBjb25zdCBlcnIgPSBCb29tLmZvcmJpZGRlbigpO1xuICAgICAgICAgICAgICBlcnIub3V0cHV0LnBheWxvYWQgPSBcIkVycm9yIGNvbm5lY3RpbmcgdG8gJ1wiICsgdXJpICsgXCInOlxcblxcblVuYWJsZSB0byBzZW5kIHJlcXVlc3RzIHRvIHRoYXQgdXJsLlwiO1xuICAgICAgICAgICAgICBlcnIub3V0cHV0LmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ3RleHQvcGxhaW4nO1xuICAgICAgICAgICAgICByZXBseShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVwbHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF0sXG5cbiAgICAgICAgaGFuZGxlcihyZXEsIHJlcGx5KSB7XG4gICAgICAgICAgY29uc3QgeyB1cmkgfSA9IHJlcS5xdWVyeTtcblxuICAgICAgICAgIHJlcGx5LnByb3h5KHtcbiAgICAgICAgICAgIHVyaSxcbiAgICAgICAgICAgIHhmb3J3YXJkOiB0cnVlLFxuICAgICAgICAgICAgcGFzc1Rocm91Z2g6IHRydWUsXG4gICAgICAgICAgICBvblJlc3BvbnNlKGVyciwgcmVzLCByZXF1ZXN0LCByZXBseSwgc2V0dGluZ3MsIHR0bCkge1xuICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXBseShcIkVycm9yIGNvbm5lY3RpbmcgdG8gJ1wiICsgcmVxdWVzdC5xdWVyeS51cmkgKyBcIic6XFxuXFxuXCIgKyBlcnIubWVzc2FnZSkudHlwZShcInRleHQvcGxhaW5cIikuc3RhdHVzQ29kZSA9IDUwMjtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXBseShudWxsLCByZXMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAuLi5wcm94eUNvbmZpZ0NvbGxlY3Rpb24uY29uZmlnRm9yVXJpKHVyaSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICBwYXRoOiAnL2FwaS9zZW5zZS9wcm94eScsXG4gICAgICAgIG1ldGhvZDogJyonLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAuLi5wcm94eVJvdXRlQ29uZmlnLFxuXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgb3V0cHV0OiAnc3RyZWFtJyxcbiAgICAgICAgICAgIHBhcnNlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICBwYXRoOiAnL2FwaS9zZW5zZS9wcm94eScsXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIC4uLnByb3h5Um91dGVDb25maWdcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgc2VydmVyLnJvdXRlKHtcbiAgICAgICAgcGF0aDogJy9hcGkvc2Vuc2UvYXBpX3NlcnZlcicsXG4gICAgICAgIG1ldGhvZDogWydHRVQnLCAnUE9TVCddLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgICAgIGxldCBzZXJ2ZXIgPSByZXF1aXJlKCcuL2FwaV9zZXJ2ZXIvc2VydmVyJyk7XG4gICAgICAgICAgbGV0IHtzZW5zZV92ZXJzaW9uLCBhcGlzfSA9IHJlcS5xdWVyeTtcbiAgICAgICAgICBpZiAoIWFwaXMpIHtcbiAgICAgICAgICAgIHJlcGx5KEJvb20uYmFkUmVxdWVzdCgnXCJhcGlzXCIgaXMgYSByZXF1aXJlZCBwYXJhbS4nKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHNlcnZlci5yZXNvbHZlQXBpKHNlbnNlX3ZlcnNpb24sIGFwaXMuc3BsaXQoXCIsXCIpLCByZXBseSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0ZXN0QXBwID0ga2liYW5hLnVpRXhwb3J0cy5hcHBzLmhpZGRlbi5ieUlkWydzZW5zZS10ZXN0cyddO1xuICAgICAgaWYgKHRlc3RBcHApIHtcbiAgICAgICAgc2VydmVyLnJvdXRlKHtcbiAgICAgICAgICBwYXRoOiAnL2FwcC9zZW5zZS10ZXN0cycsXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcGx5LnJlbmRlckFwcCh0ZXN0QXBwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIGFwcHM6IGFwcHMsXG5cbiAgICAgIG5vUGFyc2U6IFtcbiAgICAgICAgam9pbihtb2R1bGVzLCAnYWNlJyArIHNlcCksXG4gICAgICAgIGpvaW4obW9kdWxlcywgJ21vbWVudF9zcmMvbW9tZW50JyArIHNlcCksXG4gICAgICAgIGpvaW4oc3JjLCAnc2Vuc2VfZWRpdG9yL21vZGUvd29ya2VyLmpzJylcbiAgICAgIF1cbiAgICB9XG4gIH0pXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/index.js",
      "sourcesContent": [
        "import { ProxyConfigCollection } from './server/proxy_config_collection';\n\nmodule.exports = function (kibana) {\n  let { resolve, join, sep } = require('path');\n  let Joi = require('joi');\n  let Boom = require('boom');\n  let modules = resolve(__dirname, 'public/webpackShims/');\n  let src = resolve(__dirname, 'public/src/');\n  let { existsSync } = require('fs');\n  const { startsWith, endsWith } = require('lodash');\n\n  const apps = [\n    {\n      title: 'Sense',\n      description: 'JSON aware developer\\'s interface to ElasticSearch',\n      icon: 'plugins/sense/bonsai.png',\n      main: 'plugins/sense/sense',\n      autoload: kibana.autoload.styles,\n      injectVars: function (server, options) {\n        return options;\n      }\n    }\n  ];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Sense Tests',\n      id: 'sense-tests',\n      main: 'plugins/sense/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'sense',\n\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        defaultServerUrl: Joi.string().default('http://localhost:9200'),\n        proxyFilter: Joi.array().items(Joi.string()).single().default(['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean(),\n        }).default(),\n        proxyConfig: Joi.array().items(\n          Joi.object().keys({\n            match: Joi.object().keys({\n              protocol: Joi.string().default('*'),\n              host: Joi.string().default('*'),\n              port: Joi.string().default('*'),\n              path: Joi.string().default('*')\n            }),\n\n            timeout: Joi.number(),\n            ssl: Joi.object().keys({\n              verify: Joi.boolean(),\n              ca: Joi.array().single().items(Joi.string()),\n              cert: Joi.string(),\n              key: Joi.string()\n            }).default()\n          })\n        ).default([\n          {\n            match: {\n              protocol: '*',\n              host: '*',\n              port: '*',\n              path: '*'\n            },\n\n            timeout: 180000,\n            ssl: {\n              verify: true\n            }\n          }\n        ])\n      }).default();\n    },\n\n    init: function (server, options) {\n      const filters = options.proxyFilter.map(str => new RegExp(str));\n\n      if (options.ssl && options.ssl.verify) {\n        throw new Error('sense.ssl.version is no longer supported.');\n      }\n\n      const proxyConfigCollection = new ProxyConfigCollection(options.proxyConfig);\n      const proxyRouteConfig = {\n        validate: {\n          query: Joi.object().keys({\n            uri: Joi.string().uri({\n              allowRelative: false,\n              shema: ['http:', 'https:'],\n            }),\n          }).unknown(true),\n        },\n\n        pre: [\n          function filterUri(req, reply) {\n            const { uri } = req.query;\n\n            if (!filters.some(re => re.test(uri))) {\n              const err = Boom.forbidden();\n              err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n              err.output.headers['content-type'] = 'text/plain';\n              reply(err);\n            } else {\n              reply();\n            }\n          }\n        ],\n\n        handler(req, reply) {\n          const { uri } = req.query;\n\n          reply.proxy({\n            uri,\n            xforward: true,\n            passThrough: true,\n            onResponse(err, res, request, reply, settings, ttl) {\n              if (err != null) {\n                reply(\"Error connecting to '\" + request.query.uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n              } else {\n                reply(null, res);\n              }\n            },\n\n            ...proxyConfigCollection.configForUri(uri)\n          })\n        }\n      };\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: '*',\n        config: {\n          ...proxyRouteConfig,\n\n          payload: {\n            output: 'stream',\n            parse: false\n          },\n        }\n      });\n\n      server.route({\n        path: '/api/sense/proxy',\n        method: 'GET',\n        config: {\n          ...proxyRouteConfig\n        }\n      })\n\n      server.route({\n        path: '/api/sense/api_server',\n        method: ['GET', 'POST'],\n        handler: function (req, reply) {\n          let server = require('./api_server/server');\n          let {sense_version, apis} = req.query;\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      const testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function (req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [\n        join(modules, 'ace' + sep),\n        join(modules, 'moment_src/moment' + sep),\n        join(src, 'sense_editor/mode/worker.js')\n      ]\n    }\n  })\n};\n"
      ]
    },
    "mtime": 1457723837000
  },
  "{\"filename\":\"/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/proxy_config_collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "defaultsDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "defaultsDeep",
                "local": "defaultsDeep"
              }
            ]
          },
          {
            "source": "./proxy_config",
            "imported": [
              "ProxyConfig"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ProxyConfig",
                "local": "ProxyConfig"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "parse"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "parse",
                "local": "parseUrl"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProxyConfigCollection"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProxyConfigCollection",
              "exported": "ProxyConfigCollection"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _proxy_config = require('./proxy_config');\n\nvar _url = require('url');\n\nvar ProxyConfigCollection = (function () {\n  function ProxyConfigCollection() {\n    var configs = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n    _classCallCheck(this, ProxyConfigCollection);\n\n    this.configs = configs.map(function (settings) {\n      return new _proxy_config.ProxyConfig(settings);\n    });\n  }\n\n  _createClass(ProxyConfigCollection, [{\n    key: 'configForUri',\n    value: function configForUri(uri) {\n      var parsedUri = (0, _url.parse)(uri);\n      var settings = this.configs.map(function (config) {\n        return config.getForParsedUri(parsedUri);\n      });\n      return _lodash.defaultsDeep.apply(undefined, [{}].concat(_toConsumableArray(settings)));\n    }\n  }]);\n\n  return ProxyConfigCollection;\n})();\n\nexports.ProxyConfigCollection = ProxyConfigCollection;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RpbS9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtbGludXgteDY0L2luc3RhbGxlZFBsdWdpbnMvc2Vuc2Uvc2VydmVyL3Byb3h5X2NvbmZpZ19jb2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBNkIsUUFBUTs7NEJBRVQsZ0JBQWdCOzttQkFDVixLQUFLOztJQUcxQixxQkFBcUI7QUFDckIsV0FEQSxxQkFBcUIsR0FDTjtRQUFkLE9BQU8seURBQUcsRUFBRTs7MEJBRGIscUJBQXFCOztBQUU5QixRQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBQSxRQUFRO2FBQUksOEJBQWdCLFFBQVEsQ0FBQztLQUFBLENBQUMsQ0FBQTtHQUNsRTs7ZUFIVSxxQkFBcUI7O1dBS3BCLHNCQUFDLEdBQUcsRUFBRTtBQUNoQixVQUFNLFNBQVMsR0FBRyxnQkFBUyxHQUFHLENBQUMsQ0FBQztBQUNoQyxVQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFBLE1BQU07ZUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQztPQUFBLENBQUMsQ0FBQztBQUMvRSxhQUFPLHVDQUFhLEVBQUUsNEJBQUssUUFBUSxHQUFDLENBQUM7S0FDdEM7OztTQVRVLHFCQUFxQiIsImZpbGUiOiIvaG9tZS9kaW0vbWFzdGVyLWdpdC9lcy1ib29rLWV4YW1wbGUva2liYW5hLTQuNS4zLWxpbnV4LXg2NC9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL3NlcnZlci9wcm94eV9jb25maWdfY29sbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRzRGVlcCB9IGZyb20gJ2xvZGFzaCdcblxuaW1wb3J0IHsgUHJveHlDb25maWcgfSBmcm9tICcuL3Byb3h5X2NvbmZpZydcbmltcG9ydCB7IHBhcnNlIGFzIHBhcnNlVXJsIH0gZnJvbSAndXJsJ1xuXG5cbmV4cG9ydCBjbGFzcyBQcm94eUNvbmZpZ0NvbGxlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25maWdzID0gW10pIHtcbiAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzLm1hcChzZXR0aW5ncyA9PiBuZXcgUHJveHlDb25maWcoc2V0dGluZ3MpKVxuICB9XG5cbiAgY29uZmlnRm9yVXJpKHVyaSkge1xuICAgIGNvbnN0IHBhcnNlZFVyaSA9IHBhcnNlVXJsKHVyaSk7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLmNvbmZpZ3MubWFwKGNvbmZpZyA9PiBjb25maWcuZ2V0Rm9yUGFyc2VkVXJpKHBhcnNlZFVyaSkpO1xuICAgIHJldHVybiBkZWZhdWx0c0RlZXAoe30sIC4uLnNldHRpbmdzKTtcbiAgfVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/proxy_config_collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAA6B,QAAQ;;4BAET,gBAAgB;;mBACV,KAAK;;IAG1B,qBAAqB;AACrB,WADA,qBAAqB,GACN;QAAd,OAAO,yDAAG,EAAE;;0BADb,qBAAqB;;AAE9B,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,UAAA,QAAQ;aAAI,8BAAgB,QAAQ,CAAC;KAAA,CAAC,CAAA;GAClE;;eAHU,qBAAqB;;WAKpB,sBAAC,GAAG,EAAE;AAChB,UAAM,SAAS,GAAG,gBAAS,GAAG,CAAC,CAAC;AAChC,UAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM;eAAI,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC;OAAA,CAAC,CAAC;AAC/E,aAAO,uCAAa,EAAE,4BAAK,QAAQ,GAAC,CAAC;KACtC;;;SATU,qBAAqB",
      "file": "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/proxy_config_collection.js",
      "sourcesContent": [
        "import { defaultsDeep } from 'lodash'\n\nimport { ProxyConfig } from './proxy_config'\nimport { parse as parseUrl } from 'url'\n\n\nexport class ProxyConfigCollection {\n  constructor(configs = []) {\n    this.configs = configs.map(settings => new ProxyConfig(settings))\n  }\n\n  configForUri(uri) {\n    const parsedUri = parseUrl(uri);\n    const settings = this.configs.map(config => config.getForParsedUri(parsedUri));\n    return defaultsDeep({}, ...settings);\n  }\n}\n"
      ]
    },
    "mtime": 1457678751000
  },
  "{\"filename\":\"/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/proxy_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "memoize",
              "values"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "memoize",
                "local": "memoize"
              },
              {
                "kind": "named",
                "imported": "values",
                "local": "values"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "format"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "format",
                "local": "formatUrl"
              }
            ]
          },
          {
            "source": "https",
            "imported": [
              "Agent"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Agent",
                "local": "HttpsAgent"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          },
          {
            "source": "./wildcard_matcher",
            "imported": [
              "WildcardMatcher"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "WildcardMatcher",
                "local": "WildcardMatcher"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ProxyConfig"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ProxyConfig",
              "exported": "ProxyConfig"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _url = require('url');\n\nvar _https = require('https');\n\nvar _fs = require('fs');\n\nvar _wildcard_matcher = require('./wildcard_matcher');\n\nvar makeHttpsAgent = (0, _lodash.memoize)(function (opts) {\n  return new _https.Agent(opts);\n}, function (opts) {\n  return JSON.stringify(opts);\n});\n\nvar ProxyConfig = (function () {\n  function ProxyConfig(config) {\n    _classCallCheck(this, ProxyConfig);\n\n    config = Object.assign({}, config);\n\n    // -----\n    // read \"match\" info\n    // -----\n    var rawMatches = Object.assign({}, config.match);\n    this.id = (0, _url.format)({\n      protocol: rawMatches.protocol,\n      hostname: rawMatches.host,\n      port: rawMatches.port,\n      pathname: rawMatches.path\n    }) || '*';\n\n    this.matchers = {\n      protocol: new _wildcard_matcher.WildcardMatcher(rawMatches.protocol),\n      host: new _wildcard_matcher.WildcardMatcher(rawMatches.host),\n      port: new _wildcard_matcher.WildcardMatcher(rawMatches.port),\n      path: new _wildcard_matcher.WildcardMatcher(rawMatches.path, '/')\n    };\n\n    // -----\n    // read config vars\n    // -----\n    this.timeout = config.timeout;\n    this.sslAgent = this._makeSslAgent(config);\n  }\n\n  _createClass(ProxyConfig, [{\n    key: '_makeSslAgent',\n    value: function _makeSslAgent(config) {\n      var ssl = config.ssl || {};\n      this.verifySsl = ssl.verify;\n\n      var sslAgentOpts = {\n        ca: ssl.ca && ssl.ca.map(function (ca) {\n          return (0, _fs.readFileSync)(ca);\n        }),\n        cert: ssl.cert && (0, _fs.readFileSync)(ssl.cert),\n        key: ssl.key && (0, _fs.readFileSync)(ssl.key)\n      };\n\n      if ((0, _lodash.values)(sslAgentOpts).filter(Boolean).length) {\n        return new _https.Agent(sslAgentOpts);\n      }\n    }\n  }, {\n    key: 'getForParsedUri',\n    value: function getForParsedUri(_ref) {\n      var protocol = _ref.protocol;\n      var hostname = _ref.hostname;\n      var port = _ref.port;\n      var pathname = _ref.pathname;\n\n      var match = this.matchers.protocol.match(protocol.slice(0, -1));\n      match = match && this.matchers.host.match(hostname);\n      match = match && this.matchers.port.match(port);\n      match = match && this.matchers.path.match(pathname);\n\n      if (!match) return {};\n      return {\n        timeout: this.timeout,\n        rejectUnauthorized: this.sslAgent ? true : this.verifySsl,\n        agent: protocol === 'https:' ? this.sslAgent : undefined\n      };\n    }\n  }]);\n\n  return ProxyConfig;\n})();\n\nexports.ProxyConfig = ProxyConfig;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RpbS9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtbGludXgteDY0L2luc3RhbGxlZFBsdWdpbnMvc2Vuc2Uvc2VydmVyL3Byb3h5X2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3NCQUFnQyxRQUFROzttQkFDSixLQUFLOztxQkFDTCxPQUFPOztrQkFDZCxJQUFJOztnQ0FFRCxvQkFBb0I7O0FBRXBELElBQU0sY0FBYyxHQUFHLHFCQUNyQixVQUFBLElBQUk7U0FBSSxpQkFBZSxJQUFJLENBQUM7Q0FBQSxFQUM1QixVQUFBLElBQUk7U0FBSSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQztDQUFBLENBQzdCLENBQUE7O0lBRVksV0FBVztBQUNYLFdBREEsV0FBVyxDQUNWLE1BQU0sRUFBRTswQkFEVCxXQUFXOztBQUVwQixVQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7Ozs7O0FBS25DLFFBQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuRCxRQUFJLENBQUMsRUFBRSxHQUFHLGlCQUFVO0FBQ2xCLGNBQVEsRUFBRSxVQUFVLENBQUMsUUFBUTtBQUM3QixjQUFRLEVBQUUsVUFBVSxDQUFDLElBQUk7QUFDekIsVUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJO0FBQ3JCLGNBQVEsRUFBRSxVQUFVLENBQUMsSUFBSTtLQUMxQixDQUFDLElBQUksR0FBRyxDQUFDOztBQUVWLFFBQUksQ0FBQyxRQUFRLEdBQUc7QUFDZCxjQUFRLEVBQUUsc0NBQW9CLFVBQVUsQ0FBQyxRQUFRLENBQUM7QUFDbEQsVUFBSSxFQUFFLHNDQUFvQixVQUFVLENBQUMsSUFBSSxDQUFDO0FBQzFDLFVBQUksRUFBRSxzQ0FBb0IsVUFBVSxDQUFDLElBQUksQ0FBQztBQUMxQyxVQUFJLEVBQUUsc0NBQW9CLFVBQVUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDO0tBQ2hELENBQUM7Ozs7O0FBS0YsUUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQzlCLFFBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztHQUM1Qzs7ZUEzQlUsV0FBVzs7V0E2QlQsdUJBQUMsTUFBTSxFQUFFO0FBQ3BCLFVBQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDO0FBQzdCLFVBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQzs7QUFFNUIsVUFBTSxZQUFZLEdBQUc7QUFDbkIsVUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsVUFBQSxFQUFFO2lCQUFJLHNCQUFhLEVBQUUsQ0FBQztTQUFBLENBQUM7QUFDaEQsWUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLElBQUksc0JBQWEsR0FBRyxDQUFDLElBQUksQ0FBQztBQUN4QyxXQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxzQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDO09BQ3RDLENBQUM7O0FBRUYsVUFBSSxvQkFBTyxZQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFO0FBQy9DLGVBQU8saUJBQWUsWUFBWSxDQUFDLENBQUM7T0FDckM7S0FDRjs7O1dBRWMseUJBQUMsSUFBc0MsRUFBRTtVQUF0QyxRQUFRLEdBQVYsSUFBc0MsQ0FBcEMsUUFBUTtVQUFFLFFBQVEsR0FBcEIsSUFBc0MsQ0FBMUIsUUFBUTtVQUFFLElBQUksR0FBMUIsSUFBc0MsQ0FBaEIsSUFBSTtVQUFFLFFBQVEsR0FBcEMsSUFBc0MsQ0FBVixRQUFROztBQUNsRCxVQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hFLFdBQUssR0FBRyxLQUFLLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3BELFdBQUssR0FBRyxLQUFLLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2hELFdBQUssR0FBRyxLQUFLLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUVwRCxVQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQ3RCLGFBQU87QUFDTCxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87QUFDckIsMEJBQWtCLEVBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVM7QUFDekQsYUFBSyxFQUFFLFFBQVEsS0FBSyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTO09BQ3pELENBQUM7S0FDSDs7O1NBeERVLFdBQVciLCJmaWxlIjoiL2hvbWUvZGltL21hc3Rlci1naXQvZXMtYm9vay1leGFtcGxlL2tpYmFuYS00LjUuMy1saW51eC14NjQvaW5zdGFsbGVkUGx1Z2lucy9zZW5zZS9zZXJ2ZXIvcHJveHlfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVtb2l6ZSwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IHsgZm9ybWF0IGFzIGZvcm1hdFVybCB9IGZyb20gJ3VybCdcbmltcG9ydCB7IEFnZW50IGFzIEh0dHBzQWdlbnQgfSBmcm9tICdodHRwcydcbmltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJ1xuXG5pbXBvcnQgeyBXaWxkY2FyZE1hdGNoZXIgfSBmcm9tICcuL3dpbGRjYXJkX21hdGNoZXInXG5cbmNvbnN0IG1ha2VIdHRwc0FnZW50ID0gbWVtb2l6ZShcbiAgb3B0cyA9PiBuZXcgSHR0cHNBZ2VudChvcHRzKSxcbiAgb3B0cyA9PiBKU09OLnN0cmluZ2lmeShvcHRzKVxuKVxuXG5leHBvcnQgY2xhc3MgUHJveHlDb25maWcge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xuXG4gICAgLy8gLS0tLS1cbiAgICAvLyByZWFkIFwibWF0Y2hcIiBpbmZvXG4gICAgLy8gLS0tLS1cbiAgICBjb25zdCByYXdNYXRjaGVzID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnLm1hdGNoKTtcbiAgICB0aGlzLmlkID0gZm9ybWF0VXJsKHtcbiAgICAgIHByb3RvY29sOiByYXdNYXRjaGVzLnByb3RvY29sLFxuICAgICAgaG9zdG5hbWU6IHJhd01hdGNoZXMuaG9zdCxcbiAgICAgIHBvcnQ6IHJhd01hdGNoZXMucG9ydCxcbiAgICAgIHBhdGhuYW1lOiByYXdNYXRjaGVzLnBhdGhcbiAgICB9KSB8fCAnKic7XG5cbiAgICB0aGlzLm1hdGNoZXJzID0ge1xuICAgICAgcHJvdG9jb2w6IG5ldyBXaWxkY2FyZE1hdGNoZXIocmF3TWF0Y2hlcy5wcm90b2NvbCksXG4gICAgICBob3N0OiBuZXcgV2lsZGNhcmRNYXRjaGVyKHJhd01hdGNoZXMuaG9zdCksXG4gICAgICBwb3J0OiBuZXcgV2lsZGNhcmRNYXRjaGVyKHJhd01hdGNoZXMucG9ydCksXG4gICAgICBwYXRoOiBuZXcgV2lsZGNhcmRNYXRjaGVyKHJhd01hdGNoZXMucGF0aCwgJy8nKSxcbiAgICB9O1xuXG4gICAgLy8gLS0tLS1cbiAgICAvLyByZWFkIGNvbmZpZyB2YXJzXG4gICAgLy8gLS0tLS1cbiAgICB0aGlzLnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcbiAgICB0aGlzLnNzbEFnZW50ID0gdGhpcy5fbWFrZVNzbEFnZW50KGNvbmZpZyk7XG4gIH1cblxuICBfbWFrZVNzbEFnZW50KGNvbmZpZykge1xuICAgIGNvbnN0IHNzbCA9IGNvbmZpZy5zc2wgfHwge307XG4gICAgdGhpcy52ZXJpZnlTc2wgPSBzc2wudmVyaWZ5O1xuXG4gICAgY29uc3Qgc3NsQWdlbnRPcHRzID0ge1xuICAgICAgY2E6IHNzbC5jYSAmJiBzc2wuY2EubWFwKGNhID0+IHJlYWRGaWxlU3luYyhjYSkpLFxuICAgICAgY2VydDogc3NsLmNlcnQgJiYgcmVhZEZpbGVTeW5jKHNzbC5jZXJ0KSxcbiAgICAgIGtleTogc3NsLmtleSAmJiByZWFkRmlsZVN5bmMoc3NsLmtleSksXG4gICAgfTtcblxuICAgIGlmICh2YWx1ZXMoc3NsQWdlbnRPcHRzKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbmV3IEh0dHBzQWdlbnQoc3NsQWdlbnRPcHRzKTtcbiAgICB9XG4gIH1cblxuICBnZXRGb3JQYXJzZWRVcmkoeyBwcm90b2NvbCwgaG9zdG5hbWUsIHBvcnQsIHBhdGhuYW1lIH0pIHtcbiAgICBsZXQgbWF0Y2ggPSB0aGlzLm1hdGNoZXJzLnByb3RvY29sLm1hdGNoKHByb3RvY29sLnNsaWNlKDAsIC0xKSk7XG4gICAgbWF0Y2ggPSBtYXRjaCAmJiB0aGlzLm1hdGNoZXJzLmhvc3QubWF0Y2goaG9zdG5hbWUpO1xuICAgIG1hdGNoID0gbWF0Y2ggJiYgdGhpcy5tYXRjaGVycy5wb3J0Lm1hdGNoKHBvcnQpO1xuICAgIG1hdGNoID0gbWF0Y2ggJiYgdGhpcy5tYXRjaGVycy5wYXRoLm1hdGNoKHBhdGhuYW1lKTtcblxuICAgIGlmICghbWF0Y2gpIHJldHVybiB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgdGltZW91dDogdGhpcy50aW1lb3V0LFxuICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiB0aGlzLnNzbEFnZW50ID8gdHJ1ZSA6IHRoaXMudmVyaWZ5U3NsLFxuICAgICAgYWdlbnQ6IHByb3RvY29sID09PSAnaHR0cHM6JyA/IHRoaXMuc3NsQWdlbnQgOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/proxy_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;sBAAgC,QAAQ;;mBACJ,KAAK;;qBACL,OAAO;;kBACd,IAAI;;gCAED,oBAAoB;;AAEpD,IAAM,cAAc,GAAG,qBACrB,UAAA,IAAI;SAAI,iBAAe,IAAI,CAAC;CAAA,EAC5B,UAAA,IAAI;SAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;CAAA,CAC7B,CAAA;;IAEY,WAAW;AACX,WADA,WAAW,CACV,MAAM,EAAE;0BADT,WAAW;;AAEpB,UAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;;;;;AAKnC,QAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;AACnD,QAAI,CAAC,EAAE,GAAG,iBAAU;AAClB,cAAQ,EAAE,UAAU,CAAC,QAAQ;AAC7B,cAAQ,EAAE,UAAU,CAAC,IAAI;AACzB,UAAI,EAAE,UAAU,CAAC,IAAI;AACrB,cAAQ,EAAE,UAAU,CAAC,IAAI;KAC1B,CAAC,IAAI,GAAG,CAAC;;AAEV,QAAI,CAAC,QAAQ,GAAG;AACd,cAAQ,EAAE,sCAAoB,UAAU,CAAC,QAAQ,CAAC;AAClD,UAAI,EAAE,sCAAoB,UAAU,CAAC,IAAI,CAAC;AAC1C,UAAI,EAAE,sCAAoB,UAAU,CAAC,IAAI,CAAC;AAC1C,UAAI,EAAE,sCAAoB,UAAU,CAAC,IAAI,EAAE,GAAG,CAAC;KAChD,CAAC;;;;;AAKF,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AAC9B,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;GAC5C;;eA3BU,WAAW;;WA6BT,uBAAC,MAAM,EAAE;AACpB,UAAM,GAAG,GAAG,MAAM,CAAC,GAAG,IAAI,EAAE,CAAC;AAC7B,UAAI,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC;;AAE5B,UAAM,YAAY,GAAG;AACnB,UAAE,EAAE,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,UAAA,EAAE;iBAAI,sBAAa,EAAE,CAAC;SAAA,CAAC;AAChD,YAAI,EAAE,GAAG,CAAC,IAAI,IAAI,sBAAa,GAAG,CAAC,IAAI,CAAC;AACxC,WAAG,EAAE,GAAG,CAAC,GAAG,IAAI,sBAAa,GAAG,CAAC,GAAG,CAAC;OACtC,CAAC;;AAEF,UAAI,oBAAO,YAAY,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE;AAC/C,eAAO,iBAAe,YAAY,CAAC,CAAC;OACrC;KACF;;;WAEc,yBAAC,IAAsC,EAAE;UAAtC,QAAQ,GAAV,IAAsC,CAApC,QAAQ;UAAE,QAAQ,GAApB,IAAsC,CAA1B,QAAQ;UAAE,IAAI,GAA1B,IAAsC,CAAhB,IAAI;UAAE,QAAQ,GAApC,IAAsC,CAAV,QAAQ;;AAClD,UAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE,WAAK,GAAG,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AACpD,WAAK,GAAG,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAChD,WAAK,GAAG,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;;AAEpD,UAAI,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC;AACtB,aAAO;AACL,eAAO,EAAE,IAAI,CAAC,OAAO;AACrB,0BAAkB,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS;AACzD,aAAK,EAAE,QAAQ,KAAK,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,SAAS;OACzD,CAAC;KACH;;;SAxDU,WAAW",
      "file": "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/proxy_config.js",
      "sourcesContent": [
        "import { memoize, values } from 'lodash'\nimport { format as formatUrl } from 'url'\nimport { Agent as HttpsAgent } from 'https'\nimport { readFileSync } from 'fs'\n\nimport { WildcardMatcher } from './wildcard_matcher'\n\nconst makeHttpsAgent = memoize(\n  opts => new HttpsAgent(opts),\n  opts => JSON.stringify(opts)\n)\n\nexport class ProxyConfig {\n  constructor(config) {\n    config = Object.assign({}, config);\n\n    // -----\n    // read \"match\" info\n    // -----\n    const rawMatches = Object.assign({}, config.match);\n    this.id = formatUrl({\n      protocol: rawMatches.protocol,\n      hostname: rawMatches.host,\n      port: rawMatches.port,\n      pathname: rawMatches.path\n    }) || '*';\n\n    this.matchers = {\n      protocol: new WildcardMatcher(rawMatches.protocol),\n      host: new WildcardMatcher(rawMatches.host),\n      port: new WildcardMatcher(rawMatches.port),\n      path: new WildcardMatcher(rawMatches.path, '/'),\n    };\n\n    // -----\n    // read config vars\n    // -----\n    this.timeout = config.timeout;\n    this.sslAgent = this._makeSslAgent(config);\n  }\n\n  _makeSslAgent(config) {\n    const ssl = config.ssl || {};\n    this.verifySsl = ssl.verify;\n\n    const sslAgentOpts = {\n      ca: ssl.ca && ssl.ca.map(ca => readFileSync(ca)),\n      cert: ssl.cert && readFileSync(ssl.cert),\n      key: ssl.key && readFileSync(ssl.key),\n    };\n\n    if (values(sslAgentOpts).filter(Boolean).length) {\n      return new HttpsAgent(sslAgentOpts);\n    }\n  }\n\n  getForParsedUri({ protocol, hostname, port, pathname }) {\n    let match = this.matchers.protocol.match(protocol.slice(0, -1));\n    match = match && this.matchers.host.match(hostname);\n    match = match && this.matchers.port.match(port);\n    match = match && this.matchers.path.match(pathname);\n\n    if (!match) return {};\n    return {\n      timeout: this.timeout,\n      rejectUnauthorized: this.sslAgent ? true : this.verifySsl,\n      agent: protocol === 'https:' ? this.sslAgent : undefined\n    };\n  }\n}\n"
      ]
    },
    "mtime": 1457681754000
  },
  "{\"filename\":\"/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/wildcard_matcher.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "minimatch",
            "imported": [
              "Minimatch"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Minimatch",
                "local": "Minimatch"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "WildcardMatcher"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "WildcardMatcher",
              "exported": "WildcardMatcher"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _minimatch = require('minimatch');\n\nvar WildcardMatcher = (function () {\n  function WildcardMatcher(wildcardPattern, emptyVal) {\n    _classCallCheck(this, WildcardMatcher);\n\n    this.emptyVal = emptyVal;\n    this.pattern = String(wildcardPattern || '*');\n    this.matcher = new _minimatch.Minimatch(this.pattern, {\n      noglobstar: true,\n      dot: true,\n      nocase: true,\n      matchBase: true,\n      nocomment: true\n    });\n  }\n\n  _createClass(WildcardMatcher, [{\n    key: 'match',\n    value: function match(candidate) {\n      var empty = !candidate || candidate === this.emptyVal;\n      if (empty && this.pattern === '*') {\n        return true;\n      }\n\n      return this.matcher.match(candidate || '');\n    }\n  }]);\n\n  return WildcardMatcher;\n})();\n\nexports.WildcardMatcher = WildcardMatcher;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RpbS9tYXN0ZXItZ2l0L2VzLWJvb2stZXhhbXBsZS9raWJhbmEtNC41LjMtbGludXgteDY0L2luc3RhbGxlZFBsdWdpbnMvc2Vuc2Uvc2VydmVyL3dpbGRjYXJkX21hdGNoZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozt5QkFBMEIsV0FBVzs7SUFFeEIsZUFBZTtBQUNmLFdBREEsZUFBZSxDQUNkLGVBQWUsRUFBRSxRQUFRLEVBQUU7MEJBRDVCLGVBQWU7O0FBRXhCLFFBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0FBQ3pCLFFBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLGVBQWUsSUFBSSxHQUFHLENBQUMsQ0FBQztBQUM5QyxRQUFJLENBQUMsT0FBTyxHQUFHLHlCQUFjLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDekMsZ0JBQVUsRUFBRSxJQUFJO0FBQ2hCLFNBQUcsRUFBRSxJQUFJO0FBQ1QsWUFBTSxFQUFFLElBQUk7QUFDWixlQUFTLEVBQUUsSUFBSTtBQUNmLGVBQVMsRUFBRSxJQUFJO0tBQ2hCLENBQUMsQ0FBQTtHQUNIOztlQVhVLGVBQWU7O1dBYXJCLGVBQUMsU0FBUyxFQUFFO0FBQ2YsVUFBTSxLQUFLLEdBQUcsQ0FBQyxTQUFTLElBQUksU0FBUyxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDeEQsVUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLE9BQU8sS0FBSyxHQUFHLEVBQUU7QUFDakMsZUFBTyxJQUFJLENBQUM7T0FDYjs7QUFFRCxhQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUMsQ0FBQTtLQUMzQzs7O1NBcEJVLGVBQWUiLCJmaWxlIjoiL2hvbWUvZGltL21hc3Rlci1naXQvZXMtYm9vay1leGFtcGxlL2tpYmFuYS00LjUuMy1saW51eC14NjQvaW5zdGFsbGVkUGx1Z2lucy9zZW5zZS9zZXJ2ZXIvd2lsZGNhcmRfbWF0Y2hlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1pbmltYXRjaCB9IGZyb20gJ21pbmltYXRjaCdcblxuZXhwb3J0IGNsYXNzIFdpbGRjYXJkTWF0Y2hlciB7XG4gIGNvbnN0cnVjdG9yKHdpbGRjYXJkUGF0dGVybiwgZW1wdHlWYWwpIHtcbiAgICB0aGlzLmVtcHR5VmFsID0gZW1wdHlWYWw7XG4gICAgdGhpcy5wYXR0ZXJuID0gU3RyaW5nKHdpbGRjYXJkUGF0dGVybiB8fCAnKicpO1xuICAgIHRoaXMubWF0Y2hlciA9IG5ldyBNaW5pbWF0Y2godGhpcy5wYXR0ZXJuLCB7XG4gICAgICBub2dsb2JzdGFyOiB0cnVlLFxuICAgICAgZG90OiB0cnVlLFxuICAgICAgbm9jYXNlOiB0cnVlLFxuICAgICAgbWF0Y2hCYXNlOiB0cnVlLFxuICAgICAgbm9jb21tZW50OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIG1hdGNoKGNhbmRpZGF0ZSkge1xuICAgIGNvbnN0IGVtcHR5ID0gIWNhbmRpZGF0ZSB8fCBjYW5kaWRhdGUgPT09IHRoaXMuZW1wdHlWYWw7XG4gICAgaWYgKGVtcHR5ICYmIHRoaXMucGF0dGVybiA9PT0gJyonKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tYXRjaGVyLm1hdGNoKGNhbmRpZGF0ZSB8fCAnJylcbiAgfVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/wildcard_matcher.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;yBAA0B,WAAW;;IAExB,eAAe;AACf,WADA,eAAe,CACd,eAAe,EAAE,QAAQ,EAAE;0BAD5B,eAAe;;AAExB,QAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,eAAe,IAAI,GAAG,CAAC,CAAC;AAC9C,QAAI,CAAC,OAAO,GAAG,yBAAc,IAAI,CAAC,OAAO,EAAE;AACzC,gBAAU,EAAE,IAAI;AAChB,SAAG,EAAE,IAAI;AACT,YAAM,EAAE,IAAI;AACZ,eAAS,EAAE,IAAI;AACf,eAAS,EAAE,IAAI;KAChB,CAAC,CAAA;GACH;;eAXU,eAAe;;WAarB,eAAC,SAAS,EAAE;AACf,UAAM,KAAK,GAAG,CAAC,SAAS,IAAI,SAAS,KAAK,IAAI,CAAC,QAAQ,CAAC;AACxD,UAAI,KAAK,IAAI,IAAI,CAAC,OAAO,KAAK,GAAG,EAAE;AACjC,eAAO,IAAI,CAAC;OACb;;AAED,aAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,CAAA;KAC3C;;;SApBU,eAAe",
      "file": "/home/dim/master-git/es-book-example/kibana-4.5.3-linux-x64/installedPlugins/sense/server/wildcard_matcher.js",
      "sourcesContent": [
        "import { Minimatch } from 'minimatch'\n\nexport class WildcardMatcher {\n  constructor(wildcardPattern, emptyVal) {\n    this.emptyVal = emptyVal;\n    this.pattern = String(wildcardPattern || '*');\n    this.matcher = new Minimatch(this.pattern, {\n      noglobstar: true,\n      dot: true,\n      nocase: true,\n      matchBase: true,\n      nocomment: true\n    })\n  }\n\n  match(candidate) {\n    const empty = !candidate || candidate === this.emptyVal;\n    if (empty && this.pattern === '*') {\n      return true;\n    }\n\n    return this.matcher.match(candidate || '')\n  }\n}\n"
      ]
    },
    "mtime": 1457678751000
  }
}